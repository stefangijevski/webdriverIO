/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var E=["require","exports","vs/base/common/amd","vs/amdX","vs/workbench/services/languageDetection/browser/languageDetectionWorker.protocol","vs/base/common/network","vs/base/common/platform","vs/base/common/types","vs/base/common/uri","vs/workbench/services/languageDetection/browser/languageDetectionSimpleWorker","vs/base/common/stopwatch","vs/editor/common/services/textModelSync/textModelSync.impl"],y=function(l){for(var a=[],s=0,f=l.length;s<f;s++)a[s]=E[l[s]];return a};define(E[2],y([0,1]),function(l,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.$X=a.LoaderEventType=a.$W=a.$V=void 0,a.$V=!1,a.$W=!0;var s;(function(n){n[n.LoaderAvailable=1]="LoaderAvailable",n[n.BeginLoadingScript=10]="BeginLoadingScript",n[n.EndLoadingScriptOK=11]="EndLoadingScriptOK",n[n.EndLoadingScriptError=12]="EndLoadingScriptError",n[n.BeginInvokeFactory=21]="BeginInvokeFactory",n[n.EndInvokeFactory=22]="EndInvokeFactory",n[n.NodeBeginEvaluatingScript=31]="NodeBeginEvaluatingScript",n[n.NodeEndEvaluatingScript=32]="NodeEndEvaluatingScript",n[n.NodeBeginNativeRequire=33]="NodeBeginNativeRequire",n[n.NodeEndNativeRequire=34]="NodeEndNativeRequire",n[n.CachedDataFound=60]="CachedDataFound",n[n.CachedDataMissed=61]="CachedDataMissed",n[n.CachedDataRejected=62]="CachedDataRejected",n[n.CachedDataCreated=63]="CachedDataCreated"})(s||(a.LoaderEventType=s={}));class f{static get(){const w=new Map,v=new Map,d=new Map,p=new Map;function r(e,i){e.has(i.detail)||e.set(i.detail,-i.timestamp)}function c(e,i){const o=e.get(i.detail);o&&(o>=0||e.set(i.detail,o+i.timestamp))}let u=[];typeof l=="function"&&typeof l.getStats=="function"&&(u=l.getStats().slice(0).sort((e,i)=>e.timestamp-i.timestamp));for(const e of u)switch(e.type){case s.BeginLoadingScript:r(w,e);break;case s.EndLoadingScriptOK:case s.EndLoadingScriptError:c(w,e);break;case s.BeginInvokeFactory:r(v,e);break;case s.EndInvokeFactory:c(v,e);break;case s.NodeBeginNativeRequire:r(d,e);break;case s.NodeEndNativeRequire:c(d,e);break;case s.NodeBeginEvaluatingScript:r(p,e);break;case s.NodeEndEvaluatingScript:c(p,e);break}let h=0;d.forEach(e=>h+=e);function t(e){const i=[];return e.forEach((o,b)=>i.push([b,o])),i}return{amdLoad:t(w),amdInvoke:t(v),nodeRequire:t(d),nodeEval:t(p),nodeRequireTotal:h}}static toMarkdownTable(w,v){let d="";const p=[];return w.forEach((r,c)=>{p[c]=r.length}),v.forEach(r=>{r.forEach((c,u)=>{typeof c>"u"&&(c=r[u]="-");const h=c.toString().length;p[u]=Math.max(h,p[u])})}),w.forEach((r,c)=>{d+=`| ${r+" ".repeat(p[c]-r.toString().length)} `}),d+=`|
`,w.forEach((r,c)=>{d+=`| ${"-".repeat(p[c])} `}),d+=`|
`,v.forEach(r=>{r.forEach((c,u)=>{typeof c<"u"&&(d+=`| ${c+" ".repeat(p[u]-c.toString().length)} `)}),d+=`|
`}),d}}a.$X=f});var N=this&&this.__createBinding||(Object.create?function(l,a,s,f){f===void 0&&(f=s);var n=Object.getOwnPropertyDescriptor(a,s);(!n||("get"in n?!a.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(l,f,n)}:function(l,a,s,f){f===void 0&&(f=s),l[f]=a[s]}),M=this&&this.__setModuleDefault||(Object.create?function(l,a){Object.defineProperty(l,"default",{enumerable:!0,value:a})}:function(l,a){l.default=a}),S=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var a={};if(l!=null)for(var s in l)s!=="default"&&Object.prototype.hasOwnProperty.call(l,s)&&N(a,l,s);return M(a,l),a};define(E[3],y([0,1,2,5,6,7,8]),function(l,a,s,f,n,w,v){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.$zq=c,a.$Aq=u,n=S(n);class d{constructor(t,e,i){this.id=t,this.dependencies=e,this.callback=i}}class p{static{this.INSTANCE=new p}constructor(){this.a=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",this.b=typeof document=="object",this.c=[],this.d=!1}g(){this.d||(this.d=!0,globalThis.define=(t,e,i)=>{typeof t!="string"&&(i=e,e=t,t=null),(typeof e!="object"||!Array.isArray(e))&&(i=e,e=null),this.c.push(new d(t,e,i))},globalThis.define.amd=!0,this.b?this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){if(t.startsWith(window.location.origin)||t.startsWith(`${f.Schemas.vscodeFileResource}://${f.$4g}`))return t;throw new Error(`[trusted_script_src] Invalid script url: ${t}`)}}):this.a&&(this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){return t}})))}async load(t){this.g();const e=await(this.a?this.i(t):this.b?this.h(t):this.j(t));if(!e){console.warn(`Did not receive a define call from script ${t}`);return}const i={},o=[],b=[];if(Array.isArray(e.dependencies))for(const $ of e.dependencies)$==="exports"?o.push(i):b.push($);if(b.length>0)throw new Error(`Cannot resolve dependencies for script ${t}. The dependencies are: ${b.join(", ")}`);return typeof e.callback=="function"?e.callback(...o)??i:e.callback}h(t){return new Promise((e,i)=>{const o=document.createElement("script");o.setAttribute("async","async"),o.setAttribute("type","text/javascript");const b=()=>{o.removeEventListener("load",$),o.removeEventListener("error",g)},$=m=>{b(),e(this.c.pop())},g=m=>{b(),i(m)};o.addEventListener("load",$),o.addEventListener("error",g),this.f&&(t=this.f.createScriptURL(t)),o.setAttribute("src",t),window.document.getElementsByTagName("head")[0].appendChild(o)})}async i(t){return this.f&&(t=this.f.createScriptURL(t)),s.$V?await new Promise((e,i)=>{l([t],e,i)}).then(S):importScripts(t),this.c.pop()}async j(t){try{const e=globalThis._VSCODE_NODE_MODULES.fs,i=globalThis._VSCODE_NODE_MODULES.vm,o=globalThis._VSCODE_NODE_MODULES.module,b=v.URI.parse(t).fsPath,$=e.readFileSync(b).toString(),g=o.wrap($.replace(/^#!.*/,""));return new i.Script(g).runInThisContext().apply(),this.c.pop()}catch(e){throw e}}}const r=new Map;async function c(h,t,e){if(s.$V){e===void 0&&(e=!!(globalThis._VSCODE_PRODUCT_JSON??globalThis.vscode?.context?.configuration()?.product)?.commit);const i=t?`${h}/${t}`:h;if(r.has(i))return r.get(i);let o;if(/^\w[\w\d+.-]*:\/\//.test(i))o=i;else{const m=`${s.$W&&e&&!n.$r?f.$2g:f.$1g}/${i}`;o=f.$5g.asBrowserUri(m).toString(!0)}const b=p.INSTANCE.load(o);return r.set(i,b),b}else return await new Promise((i,o)=>{l([h],i,o)}).then(S)}function u(h,t){(0,w.$tg)(s.$V);const i=!!(globalThis._VSCODE_PRODUCT_JSON??globalThis.vscode?.context?.configuration()?.product)?.commit,o=s.$W&&i&&!n.$r,b=`${h}/${t}`,g=`${o?f.$2g:f.$1g}/${b}`;return f.$5g.asBrowserUri(g).toString(!0)}}),define(E[4],y([0,1]),function(l,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.$mPb=void 0;class s{static{this.CHANNEL_NAME="languageDetectionWorkerHost"}static getChannel(n){return n.getChannel(s.CHANNEL_NAME)}static setChannel(n,w){n.setChannel(s.CHANNEL_NAME,w)}}a.$mPb=s}),define(E[9],y([0,1,3,10,4,11]),function(l,a,s,f,n,w){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.LanguageDetectionSimpleWorker=void 0,a.create=v;function v(p){return new d(p)}class d{static{this.a=.2}static{this.b=.05}static{this.c=.025}static{this.d=.5}constructor(r){this.f=new w.$H5,this.i=!1,this.k=!1,this.l=new Map,this.g=n.$mPb.getChannel(r),this.f.bindToServer(r)}async $detectLanguage(r,c,u,h){const t=[],e=[],i=new f.$ke,o=this.m(r);if(!o)return;const b=async()=>{for await(const g of this.r(o)){this.l.has(g.languageId)||this.l.set(g.languageId,await this.g.$getLanguageId(g.languageId));const m=this.l.get(g.languageId);m&&(!h?.length||h.includes(m))&&(t.push(m),e.push(g.confidence))}if(i.stop(),t.length)return this.g.$sendTelemetryEvent(t,e,i.elapsed()),t[0]},$=async()=>this.o(o,c??{},h);if(u){const g=await $();if(g)return g;const m=await b();if(m)return m}else{const g=await b();if(g)return g;const m=await $();if(m)return m}}m(r){const c=this.f.getModel(r);if(!c)return;const u=c.positionAt(1e4);return c.getValueInRange({startColumn:1,startLineNumber:1,endColumn:u.column,endLineNumber:u.lineNumber})}async n(){if(this.i)return;if(this.h)return this.h;const r=await this.g.$getRegexpModelUri();try{return this.h=await(0,s.$zq)(r,""),this.h}catch{this.i=!0;return}}async o(r,c,u){const h=await this.n();if(!h)return;if(u?.length)for(const e of Object.keys(c))u.includes(e)?c[e]=1:c[e]=0;return h.detect(r,c,u)}async p(){if(this.j)return this.j;const r=await this.g.$getIndexJsUri(),{ModelOperations:c}=await(0,s.$zq)(r,"");return this.j=new c({modelJsonLoaderFunc:async()=>{const u=await fetch(await this.g.$getModelJsonUri());try{return await u.json()}catch{const t="Failed to parse model JSON.";throw new Error(t)}},weightsLoaderFunc:async()=>await(await fetch(await this.g.$getWeightsUri())).arrayBuffer()}),this.j}q(r){switch(r.languageId){case"js":case"html":case"json":case"ts":case"css":case"py":case"xml":case"php":r.confidence+=d.b;break;case"cpp":case"sh":case"java":case"cs":case"c":r.confidence+=d.c;break;case"bat":case"ini":case"makefile":case"sql":case"csv":case"toml":r.confidence-=d.d;break;default:break}return r}async*r(r){if(this.k)return;let c;try{c=await this.p()}catch(e){console.log(e),this.k=!0;return}let u;try{u=await c.runModel(r)}catch(e){console.warn(e)}if(!u||u.length===0||u[0].confidence<d.a)return;const h=this.q(u[0]);if(h.confidence<d.a)return;const t=[h];for(let e of u){if(e===h)continue;if(e=this.q(e),t[t.length-1].confidence-e.confidence>=d.a){for(;t.length;)yield t.shift();if(e.confidence>d.a){t.push(e);continue}return}else{if(e.confidence>d.a){t.push(e);continue}return}}}}a.LanguageDetectionSimpleWorker=d})}).call(this);

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/38c31bc77e0dd6ae88a4e9cc93428cc27a56ba40/core/vs/workbench/services/languageDetection/browser/languageDetectionSimpleWorker.js.map
