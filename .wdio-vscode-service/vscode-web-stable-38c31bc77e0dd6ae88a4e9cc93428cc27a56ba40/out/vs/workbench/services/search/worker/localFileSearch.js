/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var re=["require","exports","vs/base/common/glob","vs/base/common/stream","vs/base/common/buffer","vs/base/common/marshalling","vs/base/common/uri","vs/base/common/async","vs/base/common/path","vs/base/common/strings","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/workbench/services/search/common/localFileSearchWorkerTypes","vs/base/common/errors","vs/base/common/lifecycle","vs/base/common/lazy","vs/base/common/marshallingIds","vs/base/common/arrays","vs/base/common/charCode","vs/base/common/extpath","vs/base/common/map","vs/base/common/platform","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch","vs/base/common/cancellation","vs/base/common/resources"],ie=function(H){for(var t=[],P=0,L=H.length;P<L;P++)t[P]=re[H[P]];return t};define(re[3],ie([0,1,13,14]),function(H,t,P,L){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$De=R,t.$Ee=b,t.$Fe=v,t.$Ge=y,t.$He=$,t.$Ie=I,t.$Je=W,t.$Ke=K,t.$Le=q,t.$Me=Q,t.$Ne=j,t.$Oe=X,t.$Pe=Z,t.$Qe=ne,t.$Re=E;function R(o){const s=o;return s?typeof s.read=="function":!1}function b(o){const s=o;return s?[s.on,s.pause,s.resume,s.destroy].every(f=>typeof f=="function"):!1}function v(o){const s=o;return s?b(s.stream)&&Array.isArray(s.buffer)&&typeof s.ended=="boolean":!1}function y(o,s){return new m(o,s)}class m{constructor(s,f){this.e=s,this.f=f,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(s){if(!this.a.destroyed){if(this.a.flowing)this.g(s);else if(this.b.data.push(s),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(f=>this.d.push(f))}}error(s){this.a.destroyed||(this.a.flowing?this.h(s):this.b.error.push(s))}end(s){this.a.destroyed||(typeof s<"u"&&this.write(s),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(s){this.c.data.slice(0).forEach(f=>f(s))}h(s){this.c.error.length===0?(0,P.$4)(s):this.c.error.slice(0).forEach(f=>f(s))}i(){this.c.end.slice(0).forEach(s=>s())}on(s,f){if(!this.a.destroyed)switch(s){case"data":this.c.data.push(f),this.resume();break;case"end":this.c.end.push(f),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(f),this.a.flowing&&this.k();break}}removeListener(s,f){if(this.a.destroyed)return;let w;switch(s){case"data":w=this.c.data;break;case"end":w=this.c.end;break;case"error":w=this.c.error;break}if(w){const i=w.indexOf(f);i>=0&&w.splice(i,1)}}j(){if(this.b.data.length>0){const s=this.e(this.b.data);this.g(s),this.b.data.length=0;const f=[...this.d];this.d.length=0,f.forEach(w=>w())}}k(){if(this.c.error.length>0){for(const s of this.b.error)this.h(s);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}}function $(o,s){const f=[];let w;for(;(w=o.read())!==null;)f.push(w);return s(f)}function I(o,s,f){const w=[];let i;for(;(i=o.read())!==null&&w.length<f;)w.push(i);return i===null&&w.length>0?s(w):{read:()=>{if(w.length>0)return w.shift();if(typeof i<"u"){const d=i;return i=void 0,d}return o.read()}}}function W(o,s){return new Promise((f,w)=>{const i=[];K(o,{onData:d=>{s&&i.push(d)},onError:d=>{s?w(d):f(void 0)},onEnd:()=>{f(s?s(i):void 0)}})})}function K(o,s,f){o.on("error",w=>{f?.isCancellationRequested||s.onError(w)}),o.on("end",()=>{f?.isCancellationRequested||s.onEnd()}),o.on("data",w=>{f?.isCancellationRequested||s.onData(w)})}function q(o,s){return new Promise((f,w)=>{const i=new L.$Yc,d=[],C=J=>{if(d.push(J),d.length>s)return i.dispose(),o.pause(),f({stream:o,buffer:d,ended:!1})},G=J=>(i.dispose(),w(J)),U=()=>(i.dispose(),f({stream:o,buffer:d,ended:!0}));i.add((0,L.$Xc)(()=>o.removeListener("error",G))),o.on("error",G),i.add((0,L.$Xc)(()=>o.removeListener("end",U))),o.on("end",U),i.add((0,L.$Xc)(()=>o.removeListener("data",C))),o.on("data",C)})}function Q(o,s){const f=y(s);return f.end(o),f}function j(){const o=y(()=>{throw new Error("not supported")});return o.end(),o}function X(o){let s=!1;return{read:()=>s?null:(s=!0,o)}}function Z(o,s,f){const w=y(f);return K(o,{onData:i=>w.write(s.data(i)),onError:i=>w.error(s.error?s.error(i):i),onEnd:()=>w.end()}),w}function ne(o,s,f){let w=!1;return{read:()=>{const i=s.read();return w?i:(w=!0,i!==null?f([o,i]):o)}}}function E(o,s,f){let w=!1;const i=y(f);return K(s,{onData:d=>w?i.write(d):(w=!0,i.write(f([o,d]))),onError:d=>i.error(d),onEnd:()=>{w||(w=!0,i.write(o)),i.end()}}),i}});var oe=this&&this.__createBinding||(Object.create?function(H,t,P,L){L===void 0&&(L=P);var R=Object.getOwnPropertyDescriptor(t,P);(!R||("get"in R?!t.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return t[P]}}),Object.defineProperty(H,L,R)}:function(H,t,P,L){L===void 0&&(L=P),H[L]=t[P]}),le=this&&this.__setModuleDefault||(Object.create?function(H,t){Object.defineProperty(H,"default",{enumerable:!0,value:t})}:function(H,t){H.default=t}),ae=this&&this.__importStar||function(H){if(H&&H.__esModule)return H;var t={};if(H!=null)for(var P in H)P!=="default"&&Object.prototype.hasOwnProperty.call(H,P)&&oe(t,H,P);return le(t,H),t};define(re[4],ie([0,1,15,3]),function(H,t,P,L){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$Se=void 0,t.$Te=$,t.$Ue=I,t.$Ve=W,t.$We=K,t.$Xe=q,t.$Ye=Q,t.$Ze=j,t.$1e=X,t.$2e=Z,t.$3e=ne,t.$4e=E,t.$5e=o,t.$6e=s,t.$7e=f,t.$8e=w,t.$9e=i,t.$0e=d,t.$$e=C,t.$_e=G,t.$af=ee,L=ae(L);const R=typeof Buffer<"u",b=new P.$Y(()=>new Uint8Array(256));let v,y;class m{static alloc(e){return R?new m(Buffer.allocUnsafe(e)):new m(new Uint8Array(e))}static wrap(e){return R&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new m(e)}static fromString(e,u){return!(u?.dontUseNodeBuffer||!1)&&R?new m(Buffer.from(e)):(v||(v=new TextEncoder),new m(v.encode(e)))}static fromByteArray(e){const u=m.alloc(e.length);for(let O=0,F=e.length;O<F;O++)u.buffer[O]=e[O];return u}static concat(e,u){if(typeof u>"u"){u=0;for(let S=0,x=e.length;S<x;S++)u+=e[S].byteLength}const O=m.alloc(u);let F=0;for(let S=0,x=e.length;S<x;S++){const p=e[S];O.set(p,F),F+=p.byteLength}return O}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}clone(){const e=m.alloc(this.byteLength);return e.set(this),e}toString(){return R?this.buffer.toString():(y||(y=new TextDecoder),y.decode(this.buffer))}slice(e,u){return new m(this.buffer.subarray(e,u))}set(e,u){if(e instanceof m)this.buffer.set(e.buffer,u);else if(e instanceof Uint8Array)this.buffer.set(e,u);else if(e instanceof ArrayBuffer)this.buffer.set(new Uint8Array(e),u);else if(ArrayBuffer.isView(e))this.buffer.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),u);else throw new Error("Unknown argument 'array'")}readUInt32BE(e){return K(this.buffer,e)}writeUInt32BE(e,u){q(this.buffer,e,u)}readUInt32LE(e){return Q(this.buffer,e)}writeUInt32LE(e,u){j(this.buffer,e,u)}readUInt8(e){return X(this.buffer,e)}writeUInt8(e,u){Z(this.buffer,e,u)}indexOf(e,u=0){return $(this.buffer,e instanceof m?e.buffer:e,u)}}t.$Se=m;function $(c,e,u=0){const O=e.byteLength,F=c.byteLength;if(O===0)return 0;if(O===1)return c.indexOf(e[0]);if(O>F-u)return-1;const S=b.value;S.fill(e.length);for(let Y=0;Y<e.length;Y++)S[e[Y]]=e.length-Y-1;let x=u+e.length-1,p=x,D=-1;for(;x<F;)if(c[x]===e[p]){if(p===0){D=x;break}x--,p--}else x+=Math.max(e.length-p,S[c[x]]),p=e.length-1;return D}function I(c,e){return c[e+0]<<0>>>0|c[e+1]<<8>>>0}function W(c,e,u){c[u+0]=e&255,e=e>>>8,c[u+1]=e&255}function K(c,e){return c[e]*2**24+c[e+1]*2**16+c[e+2]*2**8+c[e+3]}function q(c,e,u){c[u+3]=e,e=e>>>8,c[u+2]=e,e=e>>>8,c[u+1]=e,e=e>>>8,c[u]=e}function Q(c,e){return c[e+0]<<0>>>0|c[e+1]<<8>>>0|c[e+2]<<16>>>0|c[e+3]<<24>>>0}function j(c,e,u){c[u+0]=e&255,e=e>>>8,c[u+1]=e&255,e=e>>>8,c[u+2]=e&255,e=e>>>8,c[u+3]=e&255}function X(c,e){return c[e]}function Z(c,e,u){c[u]=e}function ne(c){return L.$He(c,e=>m.concat(e))}function E(c){return L.$Oe(c)}function o(c){return L.$Je(c,e=>m.concat(e))}async function s(c){return c.ended?m.concat(c.buffer):m.concat([...c.buffer,await o(c.stream)])}function f(c){return L.$Me(c,e=>m.concat(e))}function w(c){return L.$Pe(c,{data:e=>typeof e=="string"?m.fromString(e):m.wrap(e)},e=>m.concat(e))}function i(c){return L.$Ge(e=>m.concat(e),c)}function d(c,e){return L.$Qe(c,e,u=>m.concat(u))}function C(c,e){return L.$Re(c,e,u=>m.concat(u))}function G(c){let e=0,u=0,O=0;const F=new Uint8Array(Math.floor(c.length/4*3)),S=p=>{switch(u){case 3:F[O++]=e|p,u=0;break;case 2:F[O++]=e|p>>>2,e=p<<6,u=3;break;case 1:F[O++]=e|p>>>4,e=p<<4,u=2;break;default:e=p<<2,u=1}};for(let p=0;p<c.length;p++){const D=c.charCodeAt(p);if(D>=65&&D<=90)S(D-65);else if(D>=97&&D<=122)S(D-97+26);else if(D>=48&&D<=57)S(D-48+52);else if(D===43||D===45)S(62);else if(D===47||D===95)S(63);else{if(D===61)break;throw new SyntaxError(`Unexpected base64 character ${c[p]}`)}}const x=O;for(;u>0;)S(0);return m.wrap(F).slice(0,x)}const U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function ee({buffer:c},e=!0,u=!1){const O=u?J:U;let F="";const S=c.byteLength%3;let x=0;for(;x<c.byteLength-S;x+=3){const p=c[x+0],D=c[x+1],Y=c[x+2];F+=O[p>>>2],F+=O[(p<<4|D>>>4)&63],F+=O[(D<<2|Y>>>6)&63],F+=O[Y&63]}if(S===1){const p=c[x+0];F+=O[p>>>2],F+=O[p<<4&63],e&&(F+="==")}else if(S===2){const p=c[x+0],D=c[x+1];F+=O[p>>>2],F+=O[(p<<4|D>>>4)&63],F+=O[D<<2&63],e&&(F+="=")}return F}}),define(re[5],ie([0,1,4,6,16]),function(H,t,P,L,R){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$fi=b,t.$gi=v,t.$hi=m;function b($){return JSON.stringify($,y)}function v($){let I=JSON.parse($);return I=m(I),I}function y($,I){return I instanceof RegExp?{$mid:R.MarshalledId.Regexp,source:I.source,flags:I.flags}:I}function m($,I=0){if(!$||I>200)return $;if(typeof $=="object"){switch($.$mid){case R.MarshalledId.Uri:return L.URI.revive($);case R.MarshalledId.Regexp:return new RegExp($.source,$.flags);case R.MarshalledId.Date:return new Date($.source)}if($ instanceof P.$Se||$ instanceof Uint8Array)return $;if(Array.isArray($))for(let W=0;W<$.length;++W)$[W]=m($[W],I+1);else for(const W in $)Object.hasOwnProperty.call($,W)&&($[W]=m($[W],I+1))}return $}}),define(re[2],ie([0,1,17,7,18,19,20,8,21,9]),function(H,t,P,L,R,b,v,y,m,$){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$Ck=t.$Bk=void 0,t.$Ak=I,t.$Dk=j,t.$Ek=O,t.$Fk=F,t.$Gk=S,t.$Hk=x,t.$Ik=p,t.$Jk=V;function I(){return Object.create(null)}t.$Bk="**",t.$Ck="/";const W="[/\\\\]",K="[^/\\\\]",q=/\//g;function Q(n,a){switch(n){case 0:return"";case 1:return`${K}*?`;default:return`(?:${W}|${K}+${W}${a?`|${W}${K}+`:""})*?`}}function j(n,a){if(!n)return[];const r=[];let h=!1,g=!1,B="";for(const N of n){switch(N){case a:if(!h&&!g){r.push(B),B="";continue}break;case"{":h=!0;break;case"}":h=!1;break;case"[":g=!0;break;case"]":g=!1;break}B+=N}return B&&r.push(B),r}function X(n){if(!n)return"";let a="";const r=j(n,t.$Ck);if(r.every(h=>h===t.$Bk))a=".*";else{let h=!1;r.forEach((g,B)=>{if(g===t.$Bk){if(h)return;a+=Q(2,B===r.length-1)}else{let N=!1,l="",k=!1,M="";for(const A of g){if(A!=="}"&&N){l+=A;continue}if(k&&(A!=="]"||!M)){let _;A==="-"?_=A:(A==="^"||A==="!")&&!M?_="^":A===t.$Ck?_="":_=(0,$.$mf)(A),M+=_;continue}switch(A){case"{":N=!0;continue;case"[":k=!0;continue;case"}":{const z=`(?:${j(l,",").map(te=>X(te)).join("|")})`;a+=z,N=!1,l="";break}case"]":{a+="["+M+"]",k=!1,M="";break}case"?":a+=K;continue;case"*":a+=Q(1);continue;default:a+=(0,$.$mf)(A)}}B<r.length-1&&(r[B+1]!==t.$Bk||B+2<r.length)&&(a+=W)}h=g===t.$Bk})}return a}const Z=/^\*\*\/\*\.[\w\.-]+$/,ne=/^\*\*\/([\w\.-]+)\/?$/,E=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,o=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,s=/^\*\*((\/[\w\.-]+)+)\/?$/,f=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,w=new v.$Ic(1e4),i=function(){return!1},d=function(){return null};function C(n,a){if(!n)return d;let r;typeof n!="string"?r=n.pattern:r=n,r=r.trim();const h=`${r}_${!!a.trimForExclusions}`;let g=w.get(h);if(g)return G(g,n);let B;return Z.test(r)?g=J(r.substr(4),r):(B=ne.exec(U(r,a)))?g=ee(B[1],r):(a.trimForExclusions?o:E).test(r)?g=c(r,a):(B=s.exec(U(r,a)))?g=e(B[1].substr(1),r,!0):(B=f.exec(U(r,a)))?g=e(B[1],r,!1):g=u(r),w.set(h,g),G(g,n)}function G(n,a){if(typeof a=="string")return n;const r=function(h,g){return(0,b.$Jg)(h,a.base,!m.$n)?n((0,$.$rf)(h.substr(a.base.length),y.sep),g):null};return r.allBasenames=n.allBasenames,r.allPaths=n.allPaths,r.basenames=n.basenames,r.patterns=n.patterns,r}function U(n,a){return a.trimForExclusions&&n.endsWith("/**")?n.substr(0,n.length-2):n}function J(n,a){return function(r,h){return typeof r=="string"&&r.endsWith(n)?a:null}}function ee(n,a){const r=`/${n}`,h=`\\${n}`,g=function(N,l){return typeof N!="string"?null:l?l===n?a:null:N===n||N.endsWith(r)||N.endsWith(h)?a:null},B=[n];return g.basenames=B,g.patterns=[a],g.allBasenames=B,g}function c(n,a){const r=T(n.slice(1,-1).split(",").map(l=>C(l,a)).filter(l=>l!==d),n),h=r.length;if(!h)return d;if(h===1)return r[0];const g=function(l,k){for(let M=0,A=r.length;M<A;M++)if(r[M](l,k))return n;return null},B=r.find(l=>!!l.allBasenames);B&&(g.allBasenames=B.allBasenames);const N=r.reduce((l,k)=>k.allPaths?l.concat(k.allPaths):l,[]);return N.length&&(g.allPaths=N),g}function e(n,a,r){const h=y.sep===y.$lc.sep,g=h?n:n.replace(q,y.sep),B=y.sep+g,N=y.$lc.sep+n;let l;return r?l=function(k,M){return typeof k=="string"&&(k===g||k.endsWith(B)||!h&&(k===n||k.endsWith(N)))?a:null}:l=function(k,M){return typeof k=="string"&&(k===g||!h&&k===n)?a:null},l.allPaths=[(r?"*/":"./")+n],l}function u(n){try{const a=new RegExp(`^${X(n)}$`);return function(r){return a.lastIndex=0,typeof r=="string"&&a.test(r)?n:null}}catch{return d}}function O(n,a,r){return!n||typeof a!="string"?!1:F(n)(a,void 0,r)}function F(n,a={}){if(!n)return i;if(typeof n=="string"||S(n)){const r=C(n,a);if(r===d)return i;const h=function(g,B){return!!r(g,B)};return r.allBasenames&&(h.allBasenames=r.allBasenames),r.allPaths&&(h.allPaths=r.allPaths),h}return D(n,a)}function S(n){const a=n;return a?typeof a.base=="string"&&typeof a.pattern=="string":!1}function x(n){return n.allBasenames||[]}function p(n){return n.allPaths||[]}function D(n,a){const r=T(Object.getOwnPropertyNames(n).map(l=>Y(l,n[l],a)).filter(l=>l!==d)),h=r.length;if(!h)return d;if(!r.some(l=>!!l.requiresSiblings)){if(h===1)return r[0];const l=function(A,_){let z;for(let te=0,ce=r.length;te<ce;te++){const se=r[te](A,_);if(typeof se=="string")return se;(0,L.$wh)(se)&&(z||(z=[]),z.push(se))}return z?(async()=>{for(const te of z){const ce=await te;if(typeof ce=="string")return ce}return null})():null},k=r.find(A=>!!A.allBasenames);k&&(l.allBasenames=k.allBasenames);const M=r.reduce((A,_)=>_.allPaths?A.concat(_.allPaths):A,[]);return M.length&&(l.allPaths=M),l}const g=function(l,k,M){let A,_;for(let z=0,te=r.length;z<te;z++){const ce=r[z];ce.requiresSiblings&&M&&(k||(k=(0,y.$sc)(l)),A||(A=k.substr(0,k.length-(0,y.$tc)(l).length)));const se=ce(l,k,A,M);if(typeof se=="string")return se;(0,L.$wh)(se)&&(_||(_=[]),_.push(se))}return _?(async()=>{for(const z of _){const te=await z;if(typeof te=="string")return te}return null})():null},B=r.find(l=>!!l.allBasenames);B&&(g.allBasenames=B.allBasenames);const N=r.reduce((l,k)=>k.allPaths?l.concat(k.allPaths):l,[]);return N.length&&(g.allPaths=N),g}function Y(n,a,r){if(a===!1)return d;const h=C(n,r);if(h===d)return d;if(typeof a=="boolean")return h;if(a){const g=a.when;if(typeof g=="string"){const B=(N,l,k,M)=>{if(!M||!h(N,l))return null;const A=g.replace("$(basename)",()=>k),_=M(A);return(0,L.$wh)(_)?_.then(z=>z?n:null):_?n:null};return B.requiresSiblings=!0,B}}return h}function T(n,a){const r=n.filter(l=>!!l.basenames);if(r.length<2)return n;const h=r.reduce((l,k)=>{const M=k.basenames;return M?l.concat(M):l},[]);let g;if(a){g=[];for(let l=0,k=h.length;l<k;l++)g.push(a)}else g=r.reduce((l,k)=>{const M=k.patterns;return M?l.concat(M):l},[]);const B=function(l,k){if(typeof l!="string")return null;if(!k){let A;for(A=l.length;A>0;A--){const _=l.charCodeAt(A-1);if(_===R.CharCode.Slash||_===R.CharCode.Backslash)break}k=l.substr(A)}const M=h.indexOf(k);return M!==-1?g[M]:null};B.basenames=h,B.patterns=g,B.allBasenames=h;const N=n.filter(l=>!l.basenames);return N.push(B),N}function V(n,a){return(0,P.$yb)(n,a,(r,h)=>typeof r=="string"&&typeof h=="string"?r===h:typeof r!="string"&&typeof h!="string"?r.base===h.base&&r.pattern===h.pattern:!1)}}),define(re[10],ie([0,1,22]),function(H,t,P){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$Kwc=void 0;const L=(R,b,v)=>{let y;if(R[0]===255&&R[1]===254)y=new TextDecoder("utf-16le").decode(R);else if(R[0]===254&&R[1]===255)y=new TextDecoder("utf-16be").decode(R);else if(y=new TextDecoder("utf8").decode(R),y.slice(0,1e3).includes("\uFFFD")&&R.includes(0))return[];const m=[],$=[];let I=null,W=v.remainingResultQuota;for(;W>=0&&(I=b.exec(y));)$.push({matchStartIndex:I.index,matchedText:I[0]}),W--;if($.length){const K=new Set,q=new Set,Q=[],j=o=>y.slice(Q[o].start,Q[o].end);let X=0,Z=null;const ne=/\r?\n/g;for(;Z=ne.exec(y);)Q.push({start:X,end:Z.index}),X=Z.index+Z[0].length;X<y.length&&Q.push({start:X,end:y.length});let E=0;for(const{matchStartIndex:o,matchedText:s}of $){if(W<0)break;for(;Q[E+1]&&o>Q[E].end;)E++;let f=E;for(;Q[f+1]&&o+s.length>Q[f].end;)f++;if(v.surroundingContext)for(let U=Math.max(0,E-v.surroundingContext);U<E;U++)K.add(U);let w="",i=0;for(let U=E;U<=f;U++){let J=j(U);v.previewOptions?.charsPerLine&&J.length>v.previewOptions.charsPerLine&&(i=Math.max(o-Q[E].start-20,0),J=J.substr(i,v.previewOptions.charsPerLine)),w+=`${J}
`,q.add(U)}const d=new P.$Wt(E,o-Q[E].start,f,o+s.length-Q[f].start),C=new P.$Wt(0,o-Q[E].start-i,f-E,o+s.length-Q[f].start-(f===E?i:0)),G={rangeLocations:[{source:d,preview:C}],previewText:w};if(m.push(G),v.surroundingContext)for(let U=f+1;U<=Math.min(f+v.surroundingContext,Q.length-1);U++)K.add(U)}for(const o of K)q.has(o)||m.push({text:j(o),lineNumber:o+1})}return m};t.$Kwc=L}),define(re[11],ie([0,1,2]),function(H,t,P){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$5ub=void 0,P=ae(P);class L{constructor(b,v,y){if(this.b=v,this.c=y,v[v.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");v[v.length-1]!=="/"&&(v+="/"),this.a=this.e(b,this.b,this.c)}updateContents(b){this.a=this.e(b,this.b,this.c)}isPathIncludedInTraversal(b,v){if(b[0]!=="/"||b[b.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+b);return!this.a(b,v)}isArbitraryPathIgnored(b,v){if(b[0]!=="/"||b[b.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+b);const y=b.split("/").filter(I=>I);let m=!1,$="";for(let I=0;I<y.length;I++){const W=I===y.length-1,K=y[I];if($=$+"/"+K,!this.isPathIncludedInTraversal($,W?v:!0)){m=!0;break}}return m}d(b,v,y){const m=b.map(I=>this.f(I,v)),$=Object.create(null);for(const I of m)$[I]=!0;return P.$Fk($,{trimForExclusions:y})}e(b,v,y){const m=b.split(`
`).map(E=>E.trim()).filter(E=>E&&E[0]!=="#"),$=m.filter(E=>!E.endsWith("/")),I=$.filter(E=>!E.includes("!")),W=this.d(I,v,!0),K=$.filter(E=>E.includes("!")).map(E=>E.replace(/!/g,"")),q=this.d(K,v,!1),Q=m.filter(E=>!E.includes("!")),j=this.d(Q,v,!0),X=m.filter(E=>E.includes("!")).map(E=>E.replace(/!/g,"")),Z=this.d(X,v,!1);return(E,o)=>E.startsWith(v)?o&&j(E)&&!Z(E)||W(E)&&!q(E)?!0:y?y.a(E,o):!1:!1}f(b,v){const y=b.indexOf("/");return y===-1||y===b.length-1?b="**/"+b:(y===0?v.slice(-1)==="/"&&(b=b.slice(1)):v.slice(-1)!=="/"&&(b="/"+b),b=v+b),b}}t.$5ub=L}),define(re[12],ie([0,1]),function(H,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$Rec=void 0;class P{static{this.CHANNEL_NAME="localFileSearchWorkerHost"}static getChannel(R){return R.getChannel(P.CHANNEL_NAME)}static setChannel(R,b){R.setChannel(P.CHANNEL_NAME,b)}}t.$Rec=P}),define(re[23],ie([0,1,2,6,12,8,24,10,11,9,7,25,5]),function(H,t,P,L,R,b,v,y,m,$,I,W,K){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalFileSearchSimpleWorker=void 0,t.create=Z,P=ae(P),b=ae(b);const q=!1,Q=+new Date,j={},X=async(i,d)=>{if(!q)return d();const C=Date.now(),G=(j[i]??0)+1;console.info(i,G,"starting",Math.round((C-Q)*10)/1e4),j[i]=G;const U=await d(),J=Date.now();return console.info(i,G,"took",J-C),U};function Z(i){return new ne(i)}class ne{constructor(d){this.cancellationTokens=new Map,this.d=R.$Rec.getChannel(d)}$cancelQuery(d){this.cancellationTokens.get(d)?.cancel()}g(d){const C=new v.$Be;return this.cancellationTokens.set(d,C),C}async $listDirectory(d,C,G,U,J){const ee=o(G),c=new W.$ah(()=>U),e=this.g(J),u=[];let O=!1,F=0;const S=C.maxResults||512,x=C.filePattern?p=>C.filePattern.split("").every(D=>p.includes(D)):p=>!0;return await X("listDirectory",()=>this.h(d,s(C),ee,c,p=>{if(x(p.name))return F++,S&&F>S&&(O=!0,e.cancel()),u.push(p.path)},e.token)),{results:u,limitHit:O}}async $searchDirectory(d,C,G,U,J){const ee=o(G),c=new W.$ah(()=>U);return X("searchInFiles",async()=>{const e=this.g(J),u=[],O=E(C.contentPattern),F=[];let S=0,x=0;const p=!1,D=async Y=>{if(e.token.isCancellationRequested)return;S++;const T=await Y.resolve();if(e.token.isCancellationRequested)return;const V=new Uint8Array(T),n=(0,y.$Kwc)(V,O,{surroundingContext:C.surroundingContext??0,previewOptions:C.previewOptions,remainingResultQuota:C.maxResults?C.maxResults-x:1e4});if(n.length){x+=n.length,C.maxResults&&x>C.maxResults&&e.cancel();const a={resource:L.URI.joinPath(ee.folder,Y.path),results:n};this.d.$sendTextSearchMatch(a,J),u.push(a)}};return await X("walkFolderToResolve",()=>this.h(d,s(C),ee,c,async Y=>F.push(D(Y)),e.token)),await X("resolveOngoingProcesses",()=>Promise.all(F)),q&&console.log("Searched in",S,"files"),{results:u,limitHit:p}})}async h(d,C,G,U,J,ee){const c=G.excludePattern?.map(T=>P.$Fk(T.pattern??{},{trimForExclusions:!0})),e=(T,V,n)=>c?.some(a=>a(T,V,n)),u=(T,V,n)=>(T=T.slice(1),!!(e(T,V,n)||f(C,T))),O=(T,V,n)=>(T=T.slice(1),!(e(T,V,n)||!w(C,T,U))),F=(T,V)=>({type:"file",name:T.name,path:V,resolve:()=>T.getFile().then(a=>a.arrayBuffer())}),S=T=>T.kind==="directory",x=T=>T.kind==="file",p=async(T,V,n)=>{if(!G.disregardIgnoreFiles){const r=await Promise.all([T.getFileHandle(".gitignore").catch(h=>{}),T.getFileHandle(".ignore").catch(h=>{})]);await Promise.all(r.map(async h=>{if(!h)return;const g=new TextDecoder("utf8").decode(new Uint8Array(await(await h.getFile()).arrayBuffer()));n=new m.$5ub(g,V,n)}))}const a=I.Promises.withAsyncBody(async r=>{const h=[],g=[],B=[],N=new Set;for await(const l of T.entries())B.push(l),N.add(l[0]);for(const[l,k]of B){if(ee.isCancellationRequested)break;const M=V+l;if(n&&!n.isPathIncludedInTraversal(M,k.kind==="directory"))continue;const A=_=>N.has(_);S(k)&&!u(M,l,A)?g.push(p(k,M+"/",n)):x(k)&&O(M,l,A)&&h.push(F(k,M))}r([...await Promise.all(g),...h])});return{type:"dir",name:T.name,entries:a}},D=async(T,V)=>{ee.isCancellationRequested||await Promise.all((await T.entries).sort((n,a)=>-(n.type==="dir"?0:1)+(a.type==="dir"?0:1)).map(async n=>n.type==="dir"?D(n,V):V(n)))},Y=await X("process",()=>p(d,"/"));await X("resolve",()=>D(Y,J))}}t.LocalFileSearchSimpleWorker=ne;function E(i){return(0,$.$vf)(i.pattern,!!i.isRegExp,{wholeWord:i.isWordMatch,global:!0,matchCase:i.isCaseSensitive,multiline:!0,unicode:!0})}function o(i){return(0,K.$hi)(i)}function s(i){return{...i,extraFileResources:i.extraFileResources?.map(d=>L.URI.revive(d)),folderQueries:i.folderQueries.map(d=>o(d))}}function f(i,d){return!!(i.excludePattern&&P.$Ek(i.excludePattern,d))}function w(i,d,C){return i.excludePattern&&P.$Ek(i.excludePattern,d)?!1:i.includePattern||i.usingSearchPaths?i.includePattern&&P.$Ek(i.includePattern,d)?!0:i.usingSearchPaths?!!i.folderQueries&&i.folderQueries.some(G=>{const U=G.folder,J=L.URI.file(d);if(C.isEqualOrParent(J,U)){const ee=b.$qc(U.path,J.path);return!G.includePattern||!!P.$Ek(G.includePattern,ee)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/38c31bc77e0dd6ae88a4e9cc93428cc27a56ba40/core/vs/workbench/services/search/worker/localFileSearch.js.map
