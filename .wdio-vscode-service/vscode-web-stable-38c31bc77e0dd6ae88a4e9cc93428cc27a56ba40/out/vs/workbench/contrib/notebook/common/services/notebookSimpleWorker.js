/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ie=["require","exports","vs/base/common/charCode","vs/base/common/buffer","vs/base/common/strings","vs/editor/common/model","vs/base/common/platform","vs/base/common/errors","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase","vs/editor/common/core/range","vs/base/common/path","vs/platform/instantiation/common/instantiation","vs/base/common/stream","vs/base/common/lifecycle","vs/editor/common/core/eolCounter","vs/editor/common/model/pieceTreeTextBuffer/rbTreeBase","vs/editor/common/model/textModelSearch","vs/base/common/mime","vs/base/common/glob","vs/base/common/map","vs/editor/common/core/stringBuilder","vs/editor/common/core/textChange","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder","vs/platform/contextkey/common/scanner","vs/nls","vs/platform/instantiation/common/descriptors","vs/platform/instantiation/common/extensions","vs/platform/contextkey/common/contextkey","vs/workbench/services/notebook/common/notebookDocumentService","vs/base/common/network","vs/workbench/contrib/notebook/common/notebookCommon","vs/base/common/lazy","vs/editor/common/core/position","vs/base/common/arrays","vs/base/common/async","vs/base/common/extpath","vs/base/common/event","vs/base/common/iterator","vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/base/common/diff/diff","vs/base/common/hash","vs/base/common/uri"],le=function(ee){for(var s=[],D=0,b=ee.length;D<b;D++)s[D]=ie[ee[D]];return s};define(ie[12],le([0,1,7,13]),function(ee,s,D,b){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.$De=U,s.$Ee=g,s.$Fe=O,s.$Ge=R,s.$He=w,s.$Ie=h,s.$Je=C,s.$Ke=u,s.$Le=F,s.$Me=M,s.$Ne=d,s.$Oe=a,s.$Pe=c,s.$Qe=m,s.$Re=n;function U(i){const e=i;return e?typeof e.read=="function":!1}function g(i){const e=i;return e?[e.on,e.pause,e.resume,e.destroy].every(r=>typeof r=="function"):!1}function O(i){const e=i;return e?g(e.stream)&&Array.isArray(e.buffer)&&typeof e.ended=="boolean":!1}function R(i,e){return new x(i,e)}class x{constructor(e,r){this.e=e,this.f=r,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(e){if(!this.a.destroyed){if(this.a.flowing)this.g(e);else if(this.b.data.push(e),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(r=>this.d.push(r))}}error(e){this.a.destroyed||(this.a.flowing?this.h(e):this.b.error.push(e))}end(e){this.a.destroyed||(typeof e<"u"&&this.write(e),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(e){this.c.data.slice(0).forEach(r=>r(e))}h(e){this.c.error.length===0?(0,D.$4)(e):this.c.error.slice(0).forEach(r=>r(e))}i(){this.c.end.slice(0).forEach(e=>e())}on(e,r){if(!this.a.destroyed)switch(e){case"data":this.c.data.push(r),this.resume();break;case"end":this.c.end.push(r),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(r),this.a.flowing&&this.k();break}}removeListener(e,r){if(this.a.destroyed)return;let l;switch(e){case"data":l=this.c.data;break;case"end":l=this.c.end;break;case"error":l=this.c.error;break}if(l){const f=l.indexOf(r);f>=0&&l.splice(f,1)}}j(){if(this.b.data.length>0){const e=this.e(this.b.data);this.g(e),this.b.data.length=0;const r=[...this.d];this.d.length=0,r.forEach(l=>l())}}k(){if(this.c.error.length>0){for(const e of this.b.error)this.h(e);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}}function w(i,e){const r=[];let l;for(;(l=i.read())!==null;)r.push(l);return e(r)}function h(i,e,r){const l=[];let f;for(;(f=i.read())!==null&&l.length<r;)l.push(f);return f===null&&l.length>0?e(l):{read:()=>{if(l.length>0)return l.shift();if(typeof f<"u"){const A=f;return f=void 0,A}return i.read()}}}function C(i,e){return new Promise((r,l)=>{const f=[];u(i,{onData:A=>{e&&f.push(A)},onError:A=>{e?l(A):r(void 0)},onEnd:()=>{r(e?e(f):void 0)}})})}function u(i,e,r){i.on("error",l=>{r?.isCancellationRequested||e.onError(l)}),i.on("end",()=>{r?.isCancellationRequested||e.onEnd()}),i.on("data",l=>{r?.isCancellationRequested||e.onData(l)})}function F(i,e){return new Promise((r,l)=>{const f=new b.$Yc,A=[],L=q=>{if(A.push(q),A.length>e)return f.dispose(),i.pause(),r({stream:i,buffer:A,ended:!1})},y=q=>(f.dispose(),l(q)),v=()=>(f.dispose(),r({stream:i,buffer:A,ended:!0}));f.add((0,b.$Xc)(()=>i.removeListener("error",y))),i.on("error",y),f.add((0,b.$Xc)(()=>i.removeListener("end",v))),i.on("end",v),f.add((0,b.$Xc)(()=>i.removeListener("data",L))),i.on("data",L)})}function M(i,e){const r=R(e);return r.end(i),r}function d(){const i=R(()=>{throw new Error("not supported")});return i.end(),i}function a(i){let e=!1;return{read:()=>e?null:(e=!0,i)}}function c(i,e,r){const l=R(r);return u(i,{onData:f=>l.write(e.data(f)),onError:f=>l.error(e.error?e.error(f):f),onEnd:()=>l.end()}),l}function m(i,e,r){let l=!1;return{read:()=>{const f=e.read();return l?f:(l=!0,f!==null?r([i,f]):i)}}}function n(i,e,r){let l=!1;const f=R(r);return u(e,{onData:A=>l?f.write(A):(l=!0,f.write(r([i,A]))),onError:A=>f.error(A),onEnd:()=>{l||(l=!0,f.write(i)),f.end()}}),f}});var de=this&&this.__createBinding||(Object.create?function(ee,s,D,b){b===void 0&&(b=D);var U=Object.getOwnPropertyDescriptor(s,D);(!U||("get"in U?!s.__esModule:U.writable||U.configurable))&&(U={enumerable:!0,get:function(){return s[D]}}),Object.defineProperty(ee,b,U)}:function(ee,s,D,b){b===void 0&&(b=D),ee[b]=s[D]}),ge=this&&this.__setModuleDefault||(Object.create?function(ee,s){Object.defineProperty(ee,"default",{enumerable:!0,value:s})}:function(ee,s){ee.default=s}),ue=this&&this.__importStar||function(ee){if(ee&&ee.__esModule)return ee;var s={};if(ee!=null)for(var D in ee)D!=="default"&&Object.prototype.hasOwnProperty.call(ee,D)&&de(s,ee,D);return ge(s,ee),s};define(ie[3],le([0,1,32,12]),function(ee,s,D,b){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.$Se=void 0,s.$Te=w,s.$Ue=h,s.$Ve=C,s.$We=u,s.$Xe=F,s.$Ye=M,s.$Ze=d,s.$1e=a,s.$2e=c,s.$3e=m,s.$4e=n,s.$5e=i,s.$6e=e,s.$7e=r,s.$8e=l,s.$9e=f,s.$0e=A,s.$$e=L,s.$_e=y,s.$af=B,b=ue(b);const U=typeof Buffer<"u",g=new D.$Y(()=>new Uint8Array(256));let O,R;class x{static alloc(p){return U?new x(Buffer.allocUnsafe(p)):new x(new Uint8Array(p))}static wrap(p){return U&&!Buffer.isBuffer(p)&&(p=Buffer.from(p.buffer,p.byteOffset,p.byteLength)),new x(p)}static fromString(p,z){return!(z?.dontUseNodeBuffer||!1)&&U?new x(Buffer.from(p)):(O||(O=new TextEncoder),new x(O.encode(p)))}static fromByteArray(p){const z=x.alloc(p.length);for(let Q=0,Y=p.length;Q<Y;Q++)z.buffer[Q]=p[Q];return z}static concat(p,z){if(typeof z>"u"){z=0;for(let _=0,K=p.length;_<K;_++)z+=p[_].byteLength}const Q=x.alloc(z);let Y=0;for(let _=0,K=p.length;_<K;_++){const J=p[_];Q.set(J,Y),Y+=J.byteLength}return Q}constructor(p){this.buffer=p,this.byteLength=this.buffer.byteLength}clone(){const p=x.alloc(this.byteLength);return p.set(this),p}toString(){return U?this.buffer.toString():(R||(R=new TextDecoder),R.decode(this.buffer))}slice(p,z){return new x(this.buffer.subarray(p,z))}set(p,z){if(p instanceof x)this.buffer.set(p.buffer,z);else if(p instanceof Uint8Array)this.buffer.set(p,z);else if(p instanceof ArrayBuffer)this.buffer.set(new Uint8Array(p),z);else if(ArrayBuffer.isView(p))this.buffer.set(new Uint8Array(p.buffer,p.byteOffset,p.byteLength),z);else throw new Error("Unknown argument 'array'")}readUInt32BE(p){return u(this.buffer,p)}writeUInt32BE(p,z){F(this.buffer,p,z)}readUInt32LE(p){return M(this.buffer,p)}writeUInt32LE(p,z){d(this.buffer,p,z)}readUInt8(p){return a(this.buffer,p)}writeUInt8(p,z){c(this.buffer,p,z)}indexOf(p,z=0){return w(this.buffer,p instanceof x?p.buffer:p,z)}}s.$Se=x;function w(S,p,z=0){const Q=p.byteLength,Y=S.byteLength;if(Q===0)return 0;if(Q===1)return S.indexOf(p[0]);if(Q>Y-z)return-1;const _=g.value;_.fill(p.length);for(let se=0;se<p.length;se++)_[p[se]]=p.length-se-1;let K=z+p.length-1,J=K,te=-1;for(;K<Y;)if(S[K]===p[J]){if(J===0){te=K;break}K--,J--}else K+=Math.max(p.length-J,_[S[K]]),J=p.length-1;return te}function h(S,p){return S[p+0]<<0>>>0|S[p+1]<<8>>>0}function C(S,p,z){S[z+0]=p&255,p=p>>>8,S[z+1]=p&255}function u(S,p){return S[p]*2**24+S[p+1]*2**16+S[p+2]*2**8+S[p+3]}function F(S,p,z){S[z+3]=p,p=p>>>8,S[z+2]=p,p=p>>>8,S[z+1]=p,p=p>>>8,S[z]=p}function M(S,p){return S[p+0]<<0>>>0|S[p+1]<<8>>>0|S[p+2]<<16>>>0|S[p+3]<<24>>>0}function d(S,p,z){S[z+0]=p&255,p=p>>>8,S[z+1]=p&255,p=p>>>8,S[z+2]=p&255,p=p>>>8,S[z+3]=p&255}function a(S,p){return S[p]}function c(S,p,z){S[z]=p}function m(S){return b.$He(S,p=>x.concat(p))}function n(S){return b.$Oe(S)}function i(S){return b.$Je(S,p=>x.concat(p))}async function e(S){return S.ended?x.concat(S.buffer):x.concat([...S.buffer,await i(S.stream)])}function r(S){return b.$Me(S,p=>x.concat(p))}function l(S){return b.$Pe(S,{data:p=>typeof p=="string"?x.fromString(p):x.wrap(p)},p=>x.concat(p))}function f(S){return b.$Ge(p=>x.concat(p),S)}function A(S,p){return b.$Qe(S,p,z=>x.concat(z))}function L(S,p){return b.$Re(S,p,z=>x.concat(z))}function y(S){let p=0,z=0,Q=0;const Y=new Uint8Array(Math.floor(S.length/4*3)),_=J=>{switch(z){case 3:Y[Q++]=p|J,z=0;break;case 2:Y[Q++]=p|J>>>2,p=J<<6,z=3;break;case 1:Y[Q++]=p|J>>>4,p=J<<4,z=2;break;default:p=J<<2,z=1}};for(let J=0;J<S.length;J++){const te=S.charCodeAt(J);if(te>=65&&te<=90)_(te-65);else if(te>=97&&te<=122)_(te-97+26);else if(te>=48&&te<=57)_(te-48+52);else if(te===43||te===45)_(62);else if(te===47||te===95)_(63);else{if(te===61)break;throw new SyntaxError(`Unexpected base64 character ${S[J]}`)}}const K=Q;for(;z>0;)_(0);return x.wrap(Y).slice(0,K)}const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function B({buffer:S},p=!0,z=!1){const Q=z?q:v;let Y="";const _=S.byteLength%3;let K=0;for(;K<S.byteLength-_;K+=3){const J=S[K+0],te=S[K+1],se=S[K+2];Y+=Q[J>>>2],Y+=Q[(J<<4|te>>>4)&63],Y+=Q[(te<<2|se>>>6)&63],Y+=Q[se&63]}if(_===1){const J=S[K+0];Y+=Q[J>>>2],Y+=Q[J<<4&63],p&&(Y+="==")}else if(_===2){const J=S[K+0],te=S[K+1];Y+=Q[J>>>2],Y+=Q[(J<<4|te>>>4)&63],Y+=Q[te<<2&63],p&&(Y+="=")}return Y}}),define(ie[14],le([0,1,2]),function(ee,s,D){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.StringEOL=void 0,s.$Hu=U;var b;(function(g){g[g.Unknown=0]="Unknown",g[g.Invalid=3]="Invalid",g[g.LF=1]="LF",g[g.CRLF=2]="CRLF"})(b||(s.StringEOL=b={}));function U(g){let O=0,R=0,x=0,w=b.Unknown;for(let h=0,C=g.length;h<C;h++){const u=g.charCodeAt(h);u===D.CharCode.CarriageReturn?(O===0&&(R=h),O++,h+1<C&&g.charCodeAt(h+1)===D.CharCode.LineFeed?(w|=b.CRLF,h++):w|=b.Invalid,x=h+1):u===D.CharCode.LineFeed&&(w|=b.LF,O===0&&(R=h),O++,x=h+1)}return O===0&&(R=g.length),[O,R,g.length-x,w]}}),define(ie[15],le([0,1]),function(ee,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.$oD=s.NodeColor=s.$nD=void 0,s.$pD=U,s.$qD=g,s.$rD=w,s.$sD=h,s.$tD=C,s.$uD=u,s.$vD=F,s.$wD=M;class D{constructor(a,c){this.piece=a,this.color=c,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==s.$oD)return U(this.right);let a=this;for(;a.parent!==s.$oD&&a.parent.left!==a;)a=a.parent;return a.parent===s.$oD?s.$oD:a.parent}prev(){if(this.left!==s.$oD)return g(this.left);let a=this;for(;a.parent!==s.$oD&&a.parent.right!==a;)a=a.parent;return a.parent===s.$oD?s.$oD:a.parent}detach(){this.parent=null,this.left=null,this.right=null}}s.$nD=D;var b;(function(d){d[d.Black=0]="Black",d[d.Red=1]="Red"})(b||(s.NodeColor=b={})),s.$oD=new D(null,b.Black),s.$oD.parent=s.$oD,s.$oD.left=s.$oD,s.$oD.right=s.$oD,s.$oD.color=b.Black;function U(d){for(;d.left!==s.$oD;)d=d.left;return d}function g(d){for(;d.right!==s.$oD;)d=d.right;return d}function O(d){return d===s.$oD?0:d.size_left+d.piece.length+O(d.right)}function R(d){return d===s.$oD?0:d.lf_left+d.piece.lineFeedCnt+R(d.right)}function x(){s.$oD.parent=s.$oD}function w(d,a){const c=a.right;c.size_left+=a.size_left+(a.piece?a.piece.length:0),c.lf_left+=a.lf_left+(a.piece?a.piece.lineFeedCnt:0),a.right=c.left,c.left!==s.$oD&&(c.left.parent=a),c.parent=a.parent,a.parent===s.$oD?d.root=c:a.parent.left===a?a.parent.left=c:a.parent.right=c,c.left=a,a.parent=c}function h(d,a){const c=a.left;a.left=c.right,c.right!==s.$oD&&(c.right.parent=a),c.parent=a.parent,a.size_left-=c.size_left+(c.piece?c.piece.length:0),a.lf_left-=c.lf_left+(c.piece?c.piece.lineFeedCnt:0),a.parent===s.$oD?d.root=c:a===a.parent.right?a.parent.right=c:a.parent.left=c,c.right=a,a.parent=c}function C(d,a){let c,m;if(a.left===s.$oD?(m=a,c=m.right):a.right===s.$oD?(m=a,c=m.left):(m=U(a.right),c=m.right),m===d.root){d.root=c,c.color=b.Black,a.detach(),x(),d.root.parent=s.$oD;return}const n=m.color===b.Red;if(m===m.parent.left?m.parent.left=c:m.parent.right=c,m===a?(c.parent=m.parent,M(d,c)):(m.parent===a?c.parent=m:c.parent=m.parent,M(d,c),m.left=a.left,m.right=a.right,m.parent=a.parent,m.color=a.color,a===d.root?d.root=m:a===a.parent.left?a.parent.left=m:a.parent.right=m,m.left!==s.$oD&&(m.left.parent=m),m.right!==s.$oD&&(m.right.parent=m),m.size_left=a.size_left,m.lf_left=a.lf_left,M(d,m)),a.detach(),c.parent.left===c){const e=O(c),r=R(c);if(e!==c.parent.size_left||r!==c.parent.lf_left){const l=e-c.parent.size_left,f=r-c.parent.lf_left;c.parent.size_left=e,c.parent.lf_left=r,F(d,c.parent,l,f)}}if(M(d,c.parent),n){x();return}let i;for(;c!==d.root&&c.color===b.Black;)c===c.parent.left?(i=c.parent.right,i.color===b.Red&&(i.color=b.Black,c.parent.color=b.Red,w(d,c.parent),i=c.parent.right),i.left.color===b.Black&&i.right.color===b.Black?(i.color=b.Red,c=c.parent):(i.right.color===b.Black&&(i.left.color=b.Black,i.color=b.Red,h(d,i),i=c.parent.right),i.color=c.parent.color,c.parent.color=b.Black,i.right.color=b.Black,w(d,c.parent),c=d.root)):(i=c.parent.left,i.color===b.Red&&(i.color=b.Black,c.parent.color=b.Red,h(d,c.parent),i=c.parent.left),i.left.color===b.Black&&i.right.color===b.Black?(i.color=b.Red,c=c.parent):(i.left.color===b.Black&&(i.right.color=b.Black,i.color=b.Red,w(d,i),i=c.parent.left),i.color=c.parent.color,c.parent.color=b.Black,i.left.color=b.Black,h(d,c.parent),c=d.root));c.color=b.Black,x()}function u(d,a){for(M(d,a);a!==d.root&&a.parent.color===b.Red;)if(a.parent===a.parent.parent.left){const c=a.parent.parent.right;c.color===b.Red?(a.parent.color=b.Black,c.color=b.Black,a.parent.parent.color=b.Red,a=a.parent.parent):(a===a.parent.right&&(a=a.parent,w(d,a)),a.parent.color=b.Black,a.parent.parent.color=b.Red,h(d,a.parent.parent))}else{const c=a.parent.parent.left;c.color===b.Red?(a.parent.color=b.Black,c.color=b.Black,a.parent.parent.color=b.Red,a=a.parent.parent):(a===a.parent.left&&(a=a.parent,h(d,a)),a.parent.color=b.Black,a.parent.parent.color=b.Red,w(d,a.parent.parent))}d.root.color=b.Black}function F(d,a,c,m){for(;a!==d.root&&a!==s.$oD;)a.parent.left===a&&(a.parent.size_left+=c,a.parent.lf_left+=m),a=a.parent}function M(d,a){let c=0,m=0;if(a!==d.root){for(;a!==d.root&&a===a.parent.right;)a=a.parent;if(a!==d.root)for(a=a.parent,c=O(a.left)-a.size_left,m=R(a.left)-a.lf_left,a.size_left+=c,a.lf_left+=m;a!==d.root&&(c!==0||m!==0);)a.parent.left===a&&(a.parent.size_left+=c,a.parent.lf_left+=m),a=a.parent}}}),define(ie[8],le([0,1,2,33,9,5,15,16]),function(ee,s,D,b,U,g,O,R){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.$HD=s.$GD=s.$FD=void 0,s.$DD=C,s.$ED=u;const x=65535;function w(m){let n;return m[m.length-1]<65536?n=new Uint16Array(m.length):n=new Uint32Array(m.length),n.set(m,0),n}class h{constructor(n,i,e,r,l){this.lineStarts=n,this.cr=i,this.lf=e,this.crlf=r,this.isBasicASCII=l}}function C(m,n=!0){const i=[0];let e=1;for(let r=0,l=m.length;r<l;r++){const f=m.charCodeAt(r);f===D.CharCode.CarriageReturn?r+1<l&&m.charCodeAt(r+1)===D.CharCode.LineFeed?(i[e++]=r+2,r++):i[e++]=r+1:f===D.CharCode.LineFeed&&(i[e++]=r+1)}return n?w(i):i}function u(m,n){m.length=0,m[0]=0;let i=1,e=0,r=0,l=0,f=!0;for(let L=0,y=n.length;L<y;L++){const v=n.charCodeAt(L);v===D.CharCode.CarriageReturn?L+1<y&&n.charCodeAt(L+1)===D.CharCode.LineFeed?(l++,m[i++]=L+2,L++):(e++,m[i++]=L+1):v===D.CharCode.LineFeed?(r++,m[i++]=L+1):f&&v!==D.CharCode.Tab&&(v<32||v>126)&&(f=!1)}const A=new h(w(m),e,r,l,f);return m.length=0,A}class F{constructor(n,i,e,r,l){this.bufferIndex=n,this.start=i,this.end=e,this.lineFeedCnt=r,this.length=l}}s.$FD=F;class M{constructor(n,i){this.buffer=n,this.lineStarts=i}}s.$GD=M;class d{constructor(n,i){this.a=[],this.c=n,this.d=i,this.b=0,n.root!==O.$oD&&n.iterate(n.root,e=>(e!==O.$oD&&this.a.push(e.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}}class a{constructor(n){this.a=n,this.b=[]}get(n){for(let i=this.b.length-1;i>=0;i--){const e=this.b[i];if(e.nodeStartOffset<=n&&e.nodeStartOffset+e.node.piece.length>=n)return e}return null}get2(n){for(let i=this.b.length-1;i>=0;i--){const e=this.b[i];if(e.nodeStartLineNumber&&e.nodeStartLineNumber<n&&e.nodeStartLineNumber+e.node.piece.lineFeedCnt>=n)return e}return null}set(n){this.b.length>=this.a&&this.b.shift(),this.b.push(n)}validate(n){let i=!1;const e=this.b;for(let r=0;r<e.length;r++){const l=e[r];if(l.node.parent===null||l.nodeStartOffset>=n){e[r]=null,i=!0;continue}}if(i){const r=[];for(const l of e)l!==null&&r.push(l);this.b=r}}}class c{constructor(n,i,e){this.create(n,i,e)}create(n,i,e){this.a=[new M("",[0])],this.g={line:0,column:0},this.root=O.$oD,this.b=1,this.c=0,this.d=i,this.e=i.length,this.f=e;let r=null;for(let l=0,f=n.length;l<f;l++)if(n[l].buffer.length>0){n[l].lineStarts||(n[l].lineStarts=C(n[l].buffer));const A=new F(l+1,{line:0,column:0},{line:n[l].lineStarts.length-1,column:n[l].buffer.length-n[l].lineStarts[n[l].lineStarts.length-1]},n[l].lineStarts.length-1,n[l].buffer.length);this.a.push(n[l]),r=this.S(r,A)}this.h=new a(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(n){const i=x,e=i-Math.floor(i/3),r=e*2;let l="",f=0;const A=[];if(this.iterate(this.root,L=>{const y=this.R(L),v=y.length;if(f<=e||f+v<r)return l+=y,f+=v,!0;const q=l.replace(/\r\n|\r|\n/g,n);return A.push(new M(q,C(q))),l=y,f=v,!0}),f>0){const L=l.replace(/\r\n|\r|\n/g,n);A.push(new M(L,C(L)))}this.create(A,n,!0)}getEOL(){return this.d}setEOL(n){this.d=n,this.e=this.d.length,this.normalizeEOL(n)}createSnapshot(n){return new d(this,n)}equal(n){if(this.getLength()!==n.getLength()||this.getLineCount()!==n.getLineCount())return!1;let i=0;return this.iterate(this.root,r=>{if(r===O.$oD)return!0;const l=this.R(r),f=l.length,A=n.G(i),L=n.G(i+f),y=n.getValueInRange2(A,L);return i+=f,l===y})}getOffsetAt(n,i){let e=0,r=this.root;for(;r!==O.$oD;)if(r.left!==O.$oD&&r.lf_left+1>=n)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt+1>=n){e+=r.size_left;const l=this.B(r,n-r.lf_left-2);return e+=l+i-1}else n-=r.lf_left+r.piece.lineFeedCnt,e+=r.size_left+r.piece.length,r=r.right;return e}getPositionAt(n){n=Math.floor(n),n=Math.max(0,n);let i=this.root,e=0;const r=n;for(;i!==O.$oD;)if(i.size_left!==0&&i.size_left>=n)i=i.left;else if(i.size_left+i.piece.length>=n){const l=this.A(i,n-i.size_left);if(e+=i.lf_left+l.index,l.index===0){const f=this.getOffsetAt(e+1,1),A=r-f;return new b.$Vt(e+1,A+1)}return new b.$Vt(e+1,l.remainder+1)}else if(n-=i.size_left+i.piece.length,e+=i.lf_left+i.piece.lineFeedCnt,i.right===O.$oD){const l=this.getOffsetAt(e+1,1),f=r-n-l;return new b.$Vt(e+1,f+1)}else i=i.right;return new b.$Vt(1,1)}getValueInRange(n,i){if(n.startLineNumber===n.endLineNumber&&n.startColumn===n.endColumn)return"";const e=this.H(n.startLineNumber,n.startColumn),r=this.H(n.endLineNumber,n.endColumn),l=this.getValueInRange2(e,r);return i?i!==this.d||!this.f?l.replace(/\r\n|\r|\n/g,i):i===this.getEOL()&&this.f?l:l.replace(/\r\n|\r|\n/g,i):l}getValueInRange2(n,i){if(n.node===i.node){const A=n.node,L=this.a[A.piece.bufferIndex].buffer,y=this.u(A.piece.bufferIndex,A.piece.start);return L.substring(y+n.remainder,y+i.remainder)}let e=n.node;const r=this.a[e.piece.bufferIndex].buffer,l=this.u(e.piece.bufferIndex,e.piece.start);let f=r.substring(l+n.remainder,l+e.piece.length);for(e=e.next();e!==O.$oD;){const A=this.a[e.piece.bufferIndex].buffer,L=this.u(e.piece.bufferIndex,e.piece.start);if(e===i.node){f+=A.substring(L,L+i.remainder);break}else f+=A.substr(L,e.piece.length);e=e.next()}return f}getLinesContent(){const n=[];let i=0,e="",r=!1;return this.iterate(this.root,l=>{if(l===O.$oD)return!0;const f=l.piece;let A=f.length;if(A===0)return!0;const L=this.a[f.bufferIndex].buffer,y=this.a[f.bufferIndex].lineStarts,v=f.start.line,q=f.end.line;let B=y[v]+f.start.column;if(r&&(L.charCodeAt(B)===D.CharCode.LineFeed&&(B++,A--),n[i++]=e,e="",r=!1,A===0))return!0;if(v===q)return!this.f&&L.charCodeAt(B+A-1)===D.CharCode.CarriageReturn?(r=!0,e+=L.substr(B,A-1)):e+=L.substr(B,A),!0;e+=this.f?L.substring(B,Math.max(B,y[v+1]-this.e)):L.substring(B,y[v+1]).replace(/(\r\n|\r|\n)$/,""),n[i++]=e;for(let S=v+1;S<q;S++)e=this.f?L.substring(y[S],y[S+1]-this.e):L.substring(y[S],y[S+1]).replace(/(\r\n|\r|\n)$/,""),n[i++]=e;return!this.f&&L.charCodeAt(y[q]+f.end.column-1)===D.CharCode.CarriageReturn?(r=!0,f.end.column===0?i--:e=L.substr(y[q],f.end.column-1)):e=L.substr(y[q],f.end.column),!0}),r&&(n[i++]=e,e=""),n[i++]=e,n}getLength(){return this.c}getLineCount(){return this.b}getLineContent(n){return this.j.lineNumber===n?this.j.value:(this.j.lineNumber=n,n===this.b?this.j.value=this.getLineRawContent(n):this.f?this.j.value=this.getLineRawContent(n,this.e):this.j.value=this.getLineRawContent(n).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(n){if(n.remainder===n.node.piece.length){const i=n.node.next();if(!i)return 0;const e=this.a[i.piece.bufferIndex],r=this.u(i.piece.bufferIndex,i.piece.start);return e.buffer.charCodeAt(r)}else{const i=this.a[n.node.piece.bufferIndex],r=this.u(n.node.piece.bufferIndex,n.node.piece.start)+n.remainder;return i.buffer.charCodeAt(r)}}getLineCharCode(n,i){const e=this.H(n,i+1);return this.l(e)}getLineLength(n){if(n===this.getLineCount()){const i=this.getOffsetAt(n,1);return this.getLength()-i}return this.getOffsetAt(n+1,1)-this.getOffsetAt(n,1)-this.e}getCharCode(n){const i=this.G(n);return this.l(i)}getNearestChunk(n){const i=this.G(n);if(i.remainder===i.node.piece.length){const e=i.node.next();if(!e||e===O.$oD)return"";const r=this.a[e.piece.bufferIndex],l=this.u(e.piece.bufferIndex,e.piece.start);return r.buffer.substring(l,l+e.piece.length)}else{const e=this.a[i.node.piece.bufferIndex],r=this.u(i.node.piece.bufferIndex,i.node.piece.start),l=r+i.remainder,f=r+i.node.piece.length;return e.buffer.substring(l,f)}}findMatchesInNode(n,i,e,r,l,f,A,L,y,v,q){const B=this.a[n.piece.bufferIndex],S=this.u(n.piece.bufferIndex,n.piece.start),p=this.u(n.piece.bufferIndex,l),z=this.u(n.piece.bufferIndex,f);let Q;const Y={line:0,column:0};let _,K;i._wordSeparators?(_=B.buffer.substring(p,z),K=J=>J+p,i.reset(0)):(_=B.buffer,K=J=>J,i.reset(p));do if(Q=i.next(_),Q){if(K(Q.index)>=z)return v;this.s(n,K(Q.index)-S,Y);const J=this.t(n.piece.bufferIndex,l,Y),te=Y.line===l.line?Y.column-l.column+r:Y.column+1,se=te+Q[0].length;if(q[v++]=(0,R.$zD)(new U.$Wt(e+J,te,e+J,se),Q,L),K(Q.index)+Q[0].length>=z||v>=y)return v}while(Q);return v}findMatchesLineByLine(n,i,e,r){const l=[];let f=0;const A=new R.$CD(i.wordSeparators,i.regex);let L=this.H(n.startLineNumber,n.startColumn);if(L===null)return[];const y=this.H(n.endLineNumber,n.endColumn);if(y===null)return[];let v=this.s(L.node,L.remainder);const q=this.s(y.node,y.remainder);if(L.node===y.node)return this.findMatchesInNode(L.node,A,n.startLineNumber,n.startColumn,v,q,i,e,r,f,l),l;let B=n.startLineNumber,S=L.node;for(;S!==y.node;){const z=this.t(S.piece.bufferIndex,v,S.piece.end);if(z>=1){const Y=this.a[S.piece.bufferIndex].lineStarts,_=this.u(S.piece.bufferIndex,S.piece.start),K=Y[v.line+z],J=B===n.startLineNumber?n.startColumn:1;if(f=this.findMatchesInNode(S,A,B,J,v,this.s(S,K-_),i,e,r,f,l),f>=r)return l;B+=z}const Q=B===n.startLineNumber?n.startColumn-1:0;if(B===n.endLineNumber){const Y=this.getLineContent(B).substring(Q,n.endColumn-1);return f=this.n(i,A,Y,n.endLineNumber,Q,f,l,e,r),l}if(f=this.n(i,A,this.getLineContent(B).substr(Q),B,Q,f,l,e,r),f>=r)return l;B++,L=this.H(B,1),S=L.node,v=this.s(L.node,L.remainder)}if(B===n.endLineNumber){const z=B===n.startLineNumber?n.startColumn-1:0,Q=this.getLineContent(B).substring(z,n.endColumn-1);return f=this.n(i,A,Q,n.endLineNumber,z,f,l,e,r),l}const p=B===n.startLineNumber?n.startColumn:1;return f=this.findMatchesInNode(y.node,A,B,p,v,q,i,e,r,f,l),l}n(n,i,e,r,l,f,A,L,y){const v=n.wordSeparators;if(!L&&n.simpleSearch){const B=n.simpleSearch,S=B.length,p=e.length;let z=-S;for(;(z=e.indexOf(B,z+S))!==-1;)if((!v||(0,R.$BD)(v,e,p,z,S))&&(A[f++]=new g.$nw(new U.$Wt(r,z+1+l,r,z+1+S+l),null),f>=y))return f;return f}let q;i.reset(0);do if(q=i.next(e),q&&(A[f++]=(0,R.$zD)(new U.$Wt(r,q.index+1+l,r,q.index+1+q[0].length+l),q,L),f>=y))return f;while(q);return f}insert(n,i,e=!1){if(this.f=this.f&&e,this.j.lineNumber=0,this.j.value="",this.root!==O.$oD){const{node:r,remainder:l,nodeStartOffset:f}=this.G(n),A=r.piece,L=A.bufferIndex,y=this.s(r,l);if(r.piece.bufferIndex===0&&A.end.line===this.g.line&&A.end.column===this.g.column&&f+A.length===n&&i.length<x){this.F(r,i),this.y();return}if(f===n)this.o(i,r),this.h.validate(n);else if(f+r.piece.length>n){const v=[];let q=new F(A.bufferIndex,y,A.end,this.t(A.bufferIndex,y,A.end),this.u(L,A.end)-this.u(L,y));if(this.K()&&this.M(i)&&this.I(r,l)===10){const z={line:q.start.line+1,column:0};q=new F(q.bufferIndex,z,q.end,this.t(q.bufferIndex,z,q.end),q.length-1),i+=`
`}if(this.K()&&this.L(i))if(this.I(r,l-1)===13){const z=this.s(r,l-1);this.C(r,z),i="\r"+i,r.piece.length===0&&v.push(r)}else this.C(r,y);else this.C(r,y);const B=this.w(i);q.length>0&&this.S(r,q);let S=r;for(let p=0;p<B.length;p++)S=this.S(S,B[p]);this.v(v)}else this.q(i,r)}else{const r=this.w(i);let l=this.T(null,r[0]);for(let f=1;f<r.length;f++)l=this.S(l,r[f])}this.y()}delete(n,i){if(this.j.lineNumber=0,this.j.value="",i<=0||this.root===O.$oD)return;const e=this.G(n),r=this.G(n+i),l=e.node,f=r.node;if(l===f){const B=this.s(l,e.remainder),S=this.s(l,r.remainder);if(e.nodeStartOffset===n){if(i===l.piece.length){const p=l.next();(0,O.$tD)(this,l),this.N(p),this.y();return}this.D(l,S),this.h.validate(n),this.N(l),this.y();return}if(e.nodeStartOffset+l.piece.length===n+i){this.C(l,B),this.O(l),this.y();return}this.E(l,B,S),this.y();return}const A=[],L=this.s(l,e.remainder);this.C(l,L),this.h.validate(n),l.piece.length===0&&A.push(l);const y=this.s(f,r.remainder);this.D(f,y),f.piece.length===0&&A.push(f);const v=l.next();for(let B=v;B!==O.$oD&&B!==f;B=B.next())A.push(B);const q=l.piece.length===0?l.prev():l;this.v(A),this.O(q),this.y()}o(n,i){const e=[];if(this.K()&&this.M(n)&&this.L(i)){const f=i.piece,A={line:f.start.line+1,column:0},L=new F(f.bufferIndex,A,f.end,this.t(f.bufferIndex,A,f.end),f.length-1);i.piece=L,n+=`
`,(0,O.$vD)(this,i,-1,-1),i.piece.length===0&&e.push(i)}const r=this.w(n);let l=this.T(i,r[r.length-1]);for(let f=r.length-2;f>=0;f--)l=this.T(l,r[f]);this.N(l),this.v(e)}q(n,i){this.Q(n,i)&&(n+=`
`);const e=this.w(n),r=this.S(i,e[0]);let l=r;for(let f=1;f<e.length;f++)l=this.S(l,e[f]);this.N(r)}s(n,i,e){const r=n.piece,l=n.piece.bufferIndex,f=this.a[l].lineStarts,L=f[r.start.line]+r.start.column+i;let y=r.start.line,v=r.end.line,q=0,B=0,S=0;for(;y<=v&&(q=y+(v-y)/2|0,S=f[q],q!==v);)if(B=f[q+1],L<S)v=q-1;else if(L>=B)y=q+1;else break;return e?(e.line=q,e.column=L-S,null):{line:q,column:L-S}}t(n,i,e){if(e.column===0)return e.line-i.line;const r=this.a[n].lineStarts;if(e.line===r.length-1)return e.line-i.line;const l=r[e.line+1],f=r[e.line]+e.column;if(l>f+1)return e.line-i.line;const A=f-1;return this.a[n].buffer.charCodeAt(A)===13?e.line-i.line+1:e.line-i.line}u(n,i){return this.a[n].lineStarts[i.line]+i.column}v(n){for(let i=0;i<n.length;i++)(0,O.$tD)(this,n[i])}w(n){if(n.length>x){const v=[];for(;n.length>x;){const B=n.charCodeAt(x-1);let S;B===D.CharCode.CarriageReturn||B>=55296&&B<=56319?(S=n.substring(0,x-1),n=n.substring(x-1)):(S=n.substring(0,x),n=n.substring(x));const p=C(S);v.push(new F(this.a.length,{line:0,column:0},{line:p.length-1,column:S.length-p[p.length-1]},p.length-1,S.length)),this.a.push(new M(S,p))}const q=C(n);return v.push(new F(this.a.length,{line:0,column:0},{line:q.length-1,column:n.length-q[q.length-1]},q.length-1,n.length)),this.a.push(new M(n,q)),v}let i=this.a[0].buffer.length;const e=C(n,!1);let r=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===i&&i!==0&&this.L(n)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},r=this.g;for(let v=0;v<e.length;v++)e[v]+=i+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(e.slice(1)),this.a[0].buffer+="_"+n,i+=1}else{if(i!==0)for(let v=0;v<e.length;v++)e[v]+=i;this.a[0].lineStarts=this.a[0].lineStarts.concat(e.slice(1)),this.a[0].buffer+=n}const l=this.a[0].buffer.length,f=this.a[0].lineStarts.length-1,A=l-this.a[0].lineStarts[f],L={line:f,column:A},y=new F(0,r,L,this.t(0,r,L),l-i);return this.g=L,[y]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(n,i=0){let e=this.root,r="";const l=this.h.get2(n);if(l){e=l.node;const f=this.B(e,n-l.nodeStartLineNumber-1),A=this.a[e.piece.bufferIndex].buffer,L=this.u(e.piece.bufferIndex,e.piece.start);if(l.nodeStartLineNumber+e.piece.lineFeedCnt===n)r=A.substring(L+f,L+e.piece.length);else{const y=this.B(e,n-l.nodeStartLineNumber);return A.substring(L+f,L+y-i)}}else{let f=0;const A=n;for(;e!==O.$oD;)if(e.left!==O.$oD&&e.lf_left>=n-1)e=e.left;else if(e.lf_left+e.piece.lineFeedCnt>n-1){const L=this.B(e,n-e.lf_left-2),y=this.B(e,n-e.lf_left-1),v=this.a[e.piece.bufferIndex].buffer,q=this.u(e.piece.bufferIndex,e.piece.start);return f+=e.size_left,this.h.set({node:e,nodeStartOffset:f,nodeStartLineNumber:A-(n-1-e.lf_left)}),v.substring(q+L,q+y-i)}else if(e.lf_left+e.piece.lineFeedCnt===n-1){const L=this.B(e,n-e.lf_left-2),y=this.a[e.piece.bufferIndex].buffer,v=this.u(e.piece.bufferIndex,e.piece.start);r=y.substring(v+L,v+e.piece.length);break}else n-=e.lf_left+e.piece.lineFeedCnt,f+=e.size_left+e.piece.length,e=e.right}for(e=e.next();e!==O.$oD;){const f=this.a[e.piece.bufferIndex].buffer;if(e.piece.lineFeedCnt>0){const A=this.B(e,0),L=this.u(e.piece.bufferIndex,e.piece.start);return r+=f.substring(L,L+A-i),r}else{const A=this.u(e.piece.bufferIndex,e.piece.start);r+=f.substr(A,e.piece.length)}e=e.next()}return r}y(){let n=this.root,i=1,e=0;for(;n!==O.$oD;)i+=n.lf_left+n.piece.lineFeedCnt,e+=n.size_left+n.piece.length,n=n.right;this.b=i,this.c=e,this.h.validate(this.c)}A(n,i){const e=n.piece,r=this.s(n,i),l=r.line-e.start.line;if(this.u(e.bufferIndex,e.end)-this.u(e.bufferIndex,e.start)===i){const f=this.t(n.piece.bufferIndex,e.start,r);if(f!==l)return{index:f,remainder:0}}return{index:l,remainder:r.column}}B(n,i){if(i<0)return 0;const e=n.piece,r=this.a[e.bufferIndex].lineStarts,l=e.start.line+i+1;return l>e.end.line?r[e.end.line]+e.end.column-r[e.start.line]-e.start.column:r[l]-r[e.start.line]-e.start.column}C(n,i){const e=n.piece,r=e.lineFeedCnt,l=this.u(e.bufferIndex,e.end),f=i,A=this.u(e.bufferIndex,f),L=this.t(e.bufferIndex,e.start,f),y=L-r,v=A-l,q=e.length+v;n.piece=new F(e.bufferIndex,e.start,f,L,q),(0,O.$vD)(this,n,v,y)}D(n,i){const e=n.piece,r=e.lineFeedCnt,l=this.u(e.bufferIndex,e.start),f=i,A=this.t(e.bufferIndex,f,e.end),L=this.u(e.bufferIndex,f),y=A-r,v=l-L,q=e.length+v;n.piece=new F(e.bufferIndex,f,e.end,A,q),(0,O.$vD)(this,n,v,y)}E(n,i,e){const r=n.piece,l=r.start,f=r.end,A=r.length,L=r.lineFeedCnt,y=i,v=this.t(r.bufferIndex,r.start,y),q=this.u(r.bufferIndex,i)-this.u(r.bufferIndex,l);n.piece=new F(r.bufferIndex,r.start,y,v,q),(0,O.$vD)(this,n,q-A,v-L);const B=new F(r.bufferIndex,e,f,this.t(r.bufferIndex,e,f),this.u(r.bufferIndex,f)-this.u(r.bufferIndex,e)),S=this.S(n,B);this.N(S)}F(n,i){this.Q(i,n)&&(i+=`
`);const e=this.K()&&this.L(i)&&this.M(n),r=this.a[0].buffer.length;this.a[0].buffer+=i;const l=C(i,!1);for(let S=0;S<l.length;S++)l[S]+=r;if(e){const S=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:r-S}}this.a[0].lineStarts=this.a[0].lineStarts.concat(l.slice(1));const f=this.a[0].lineStarts.length-1,A=this.a[0].buffer.length-this.a[0].lineStarts[f],L={line:f,column:A},y=n.piece.length+i.length,v=n.piece.lineFeedCnt,q=this.t(0,n.piece.start,L),B=q-v;n.piece=new F(n.piece.bufferIndex,n.piece.start,L,q,y),this.g=L,(0,O.$vD)(this,n,i.length,B)}G(n){let i=this.root;const e=this.h.get(n);if(e)return{node:e.node,nodeStartOffset:e.nodeStartOffset,remainder:n-e.nodeStartOffset};let r=0;for(;i!==O.$oD;)if(i.size_left>n)i=i.left;else if(i.size_left+i.piece.length>=n){r+=i.size_left;const l={node:i,remainder:n-i.size_left,nodeStartOffset:r};return this.h.set(l),l}else n-=i.size_left+i.piece.length,r+=i.size_left+i.piece.length,i=i.right;return null}H(n,i){let e=this.root,r=0;for(;e!==O.$oD;)if(e.left!==O.$oD&&e.lf_left>=n-1)e=e.left;else if(e.lf_left+e.piece.lineFeedCnt>n-1){const l=this.B(e,n-e.lf_left-2),f=this.B(e,n-e.lf_left-1);return r+=e.size_left,{node:e,remainder:Math.min(l+i-1,f),nodeStartOffset:r}}else if(e.lf_left+e.piece.lineFeedCnt===n-1){const l=this.B(e,n-e.lf_left-2);if(l+i-1<=e.piece.length)return{node:e,remainder:l+i-1,nodeStartOffset:r};i-=e.piece.length-l;break}else n-=e.lf_left+e.piece.lineFeedCnt,r+=e.size_left+e.piece.length,e=e.right;for(e=e.next();e!==O.$oD;){if(e.piece.lineFeedCnt>0){const l=this.B(e,0),f=this.J(e);return{node:e,remainder:Math.min(i-1,l),nodeStartOffset:f}}else if(e.piece.length>=i-1){const l=this.J(e);return{node:e,remainder:i-1,nodeStartOffset:l}}else i-=e.piece.length;e=e.next()}return null}I(n,i){if(n.piece.lineFeedCnt<1)return-1;const e=this.a[n.piece.bufferIndex],r=this.u(n.piece.bufferIndex,n.piece.start)+i;return e.buffer.charCodeAt(r)}J(n){if(!n)return 0;let i=n.size_left;for(;n!==this.root;)n.parent.right===n&&(i+=n.parent.size_left+n.parent.piece.length),n=n.parent;return i}K(){return!(this.f&&this.d===`
`)}L(n){if(typeof n=="string")return n.charCodeAt(0)===10;if(n===O.$oD||n.piece.lineFeedCnt===0)return!1;const i=n.piece,e=this.a[i.bufferIndex].lineStarts,r=i.start.line,l=e[r]+i.start.column;return r===e.length-1||e[r+1]>l+1?!1:this.a[i.bufferIndex].buffer.charCodeAt(l)===10}M(n){return typeof n=="string"?n.charCodeAt(n.length-1)===13:n===O.$oD||n.piece.lineFeedCnt===0?!1:this.I(n,n.piece.length-1)===13}N(n){if(this.K()&&this.L(n)){const i=n.prev();this.M(i)&&this.P(i,n)}}O(n){if(this.K()&&this.M(n)){const i=n.next();this.L(i)&&this.P(n,i)}}P(n,i){const e=[],r=this.a[n.piece.bufferIndex].lineStarts;let l;n.piece.end.column===0?l={line:n.piece.end.line-1,column:r[n.piece.end.line]-r[n.piece.end.line-1]-1}:l={line:n.piece.end.line,column:n.piece.end.column-1};const f=n.piece.length-1,A=n.piece.lineFeedCnt-1;n.piece=new F(n.piece.bufferIndex,n.piece.start,l,A,f),(0,O.$vD)(this,n,-1,-1),n.piece.length===0&&e.push(n);const L={line:i.piece.start.line+1,column:0},y=i.piece.length-1,v=this.t(i.piece.bufferIndex,L,i.piece.end);i.piece=new F(i.piece.bufferIndex,L,i.piece.end,v,y),(0,O.$vD)(this,i,-1,-1),i.piece.length===0&&e.push(i);const q=this.w(`\r
`);this.S(n,q[0]);for(let B=0;B<e.length;B++)(0,O.$tD)(this,e[B])}Q(n,i){if(this.K()&&this.M(n)){const e=i.next();if(this.L(e)){if(n+=`
`,e.piece.length===1)(0,O.$tD)(this,e);else{const r=e.piece,l={line:r.start.line+1,column:0},f=r.length-1,A=this.t(r.bufferIndex,l,r.end);e.piece=new F(r.bufferIndex,l,r.end,A,f),(0,O.$vD)(this,e,-1,-1)}return!0}}return!1}iterate(n,i){if(n===O.$oD)return i(O.$oD);const e=this.iterate(n.left,i);return e&&i(n)&&this.iterate(n.right,i)}R(n){if(n===O.$oD)return"";const i=this.a[n.piece.bufferIndex],e=n.piece,r=this.u(e.bufferIndex,e.start),l=this.u(e.bufferIndex,e.end);return i.buffer.substring(r,l)}getPieceContent(n){const i=this.a[n.bufferIndex],e=this.u(n.bufferIndex,n.start),r=this.u(n.bufferIndex,n.end);return i.buffer.substring(e,r)}S(n,i){const e=new O.$nD(i,O.NodeColor.Red);if(e.left=O.$oD,e.right=O.$oD,e.parent=O.$oD,e.size_left=0,e.lf_left=0,this.root===O.$oD)this.root=e,e.color=O.NodeColor.Black;else if(n.right===O.$oD)n.right=e,e.parent=n;else{const l=(0,O.$pD)(n.right);l.left=e,e.parent=l}return(0,O.$uD)(this,e),e}T(n,i){const e=new O.$nD(i,O.NodeColor.Red);if(e.left=O.$oD,e.right=O.$oD,e.parent=O.$oD,e.size_left=0,e.lf_left=0,this.root===O.$oD)this.root=e,e.color=O.NodeColor.Black;else if(n.left===O.$oD)n.left=e,e.parent=n;else{const r=(0,O.$qD)(n.left);r.right=e,e.parent=r}return(0,O.$uD)(this,e),e}U(n){let i="";return this.iterate(n,e=>(i+=this.R(e),!0)),i}}s.$HD=c}),define(ie[17],le([0,1,10]),function(ee,s,D){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.$gt=void 0,s.$ht=g,s.$it=O,s.$jt=R,s.$kt=w,s.$gt=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});const b={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},U={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function g(h){const C=(0,D.$tc)(h),u=b[C.toLowerCase()];return u!==void 0?u:O(h)}function O(h){const C=(0,D.$tc)(h);return U[C.toLowerCase()]}function R(h){for(const C in U)if(U[C]===h)return C}const x=/^(.+)\/(.+?)(;.+)?$/;function w(h,C){const u=x.exec(h);return u?`${u[1].toLowerCase()}/${u[2].toLowerCase()}${u[3]??""}`:C?void 0:h}}),define(ie[18],le([0,1,34,35,2,36,19,10,6,4]),function(ee,s,D,b,U,g,O,R,x,w){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.$Ck=s.$Bk=void 0,s.$Ak=h,s.$Dk=d,s.$Ek=Q,s.$Fk=Y,s.$Gk=_,s.$Hk=K,s.$Ik=J,s.$Jk=$;function h(){return Object.create(null)}s.$Bk="**",s.$Ck="/";const C="[/\\\\]",u="[^/\\\\]",F=/\//g;function M(E,j){switch(E){case 0:return"";case 1:return`${u}*?`;default:return`(?:${C}|${u}+${C}${j?`|${C}${u}+`:""})*?`}}function d(E,j){if(!E)return[];const N=[];let V=!1,W=!1,G="";for(const X of E){switch(X){case j:if(!V&&!W){N.push(G),G="";continue}break;case"{":V=!0;break;case"}":V=!1;break;case"[":W=!0;break;case"]":W=!1;break}G+=X}return G&&N.push(G),N}function a(E){if(!E)return"";let j="";const N=d(E,s.$Ck);if(N.every(V=>V===s.$Bk))j=".*";else{let V=!1;N.forEach((W,G)=>{if(W===s.$Bk){if(V)return;j+=M(2,G===N.length-1)}else{let X=!1,T="",k=!1,t="";for(const o of W){if(o!=="}"&&X){T+=o;continue}if(k&&(o!=="]"||!t)){let I;o==="-"?I=o:(o==="^"||o==="!")&&!t?I="^":o===s.$Ck?I="":I=(0,w.$mf)(o),t+=I;continue}switch(o){case"{":X=!0;continue;case"[":k=!0;continue;case"}":{const P=`(?:${d(T,",").map(Z=>a(Z)).join("|")})`;j+=P,X=!1,T="";break}case"]":{j+="["+t+"]",k=!1,t="";break}case"?":j+=u;continue;case"*":j+=M(1);continue;default:j+=(0,w.$mf)(o)}}G<N.length-1&&(N[G+1]!==s.$Bk||G+2<N.length)&&(j+=C)}V=W===s.$Bk})}return j}const c=/^\*\*\/\*\.[\w\.-]+$/,m=/^\*\*\/([\w\.-]+)\/?$/,n=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,i=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,e=/^\*\*((\/[\w\.-]+)+)\/?$/,r=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,l=new O.$Ic(1e4),f=function(){return!1},A=function(){return null};function L(E,j){if(!E)return A;let N;typeof E!="string"?N=E.pattern:N=E,N=N.trim();const V=`${N}_${!!j.trimForExclusions}`;let W=l.get(V);if(W)return y(W,E);let G;return c.test(N)?W=q(N.substr(4),N):(G=m.exec(v(N,j)))?W=B(G[1],N):(j.trimForExclusions?i:n).test(N)?W=S(N,j):(G=e.exec(v(N,j)))?W=p(G[1].substr(1),N,!0):(G=r.exec(v(N,j)))?W=p(G[1],N,!1):W=z(N),l.set(V,W),y(W,E)}function y(E,j){if(typeof j=="string")return E;const N=function(V,W){return(0,g.$Jg)(V,j.base,!x.$n)?E((0,w.$rf)(V.substr(j.base.length),R.sep),W):null};return N.allBasenames=E.allBasenames,N.allPaths=E.allPaths,N.basenames=E.basenames,N.patterns=E.patterns,N}function v(E,j){return j.trimForExclusions&&E.endsWith("/**")?E.substr(0,E.length-2):E}function q(E,j){return function(N,V){return typeof N=="string"&&N.endsWith(E)?j:null}}function B(E,j){const N=`/${E}`,V=`\\${E}`,W=function(X,T){return typeof X!="string"?null:T?T===E?j:null:X===E||X.endsWith(N)||X.endsWith(V)?j:null},G=[E];return W.basenames=G,W.patterns=[j],W.allBasenames=G,W}function S(E,j){const N=oe(E.slice(1,-1).split(",").map(T=>L(T,j)).filter(T=>T!==A),E),V=N.length;if(!V)return A;if(V===1)return N[0];const W=function(T,k){for(let t=0,o=N.length;t<o;t++)if(N[t](T,k))return E;return null},G=N.find(T=>!!T.allBasenames);G&&(W.allBasenames=G.allBasenames);const X=N.reduce((T,k)=>k.allPaths?T.concat(k.allPaths):T,[]);return X.length&&(W.allPaths=X),W}function p(E,j,N){const V=R.sep===R.$lc.sep,W=V?E:E.replace(F,R.sep),G=R.sep+W,X=R.$lc.sep+E;let T;return N?T=function(k,t){return typeof k=="string"&&(k===W||k.endsWith(G)||!V&&(k===E||k.endsWith(X)))?j:null}:T=function(k,t){return typeof k=="string"&&(k===W||!V&&k===E)?j:null},T.allPaths=[(N?"*/":"./")+E],T}function z(E){try{const j=new RegExp(`^${a(E)}$`);return function(N){return j.lastIndex=0,typeof N=="string"&&j.test(N)?E:null}}catch{return A}}function Q(E,j,N){return!E||typeof j!="string"?!1:Y(E)(j,void 0,N)}function Y(E,j={}){if(!E)return f;if(typeof E=="string"||_(E)){const N=L(E,j);if(N===A)return f;const V=function(W,G){return!!N(W,G)};return N.allBasenames&&(V.allBasenames=N.allBasenames),N.allPaths&&(V.allPaths=N.allPaths),V}return te(E,j)}function _(E){const j=E;return j?typeof j.base=="string"&&typeof j.pattern=="string":!1}function K(E){return E.allBasenames||[]}function J(E){return E.allPaths||[]}function te(E,j){const N=oe(Object.getOwnPropertyNames(E).map(T=>se(T,E[T],j)).filter(T=>T!==A)),V=N.length;if(!V)return A;if(!N.some(T=>!!T.requiresSiblings)){if(V===1)return N[0];const T=function(o,I){let P;for(let Z=0,H=N.length;Z<H;Z++){const ne=N[Z](o,I);if(typeof ne=="string")return ne;(0,b.$wh)(ne)&&(P||(P=[]),P.push(ne))}return P?(async()=>{for(const Z of P){const H=await Z;if(typeof H=="string")return H}return null})():null},k=N.find(o=>!!o.allBasenames);k&&(T.allBasenames=k.allBasenames);const t=N.reduce((o,I)=>I.allPaths?o.concat(I.allPaths):o,[]);return t.length&&(T.allPaths=t),T}const W=function(T,k,t){let o,I;for(let P=0,Z=N.length;P<Z;P++){const H=N[P];H.requiresSiblings&&t&&(k||(k=(0,R.$sc)(T)),o||(o=k.substr(0,k.length-(0,R.$tc)(T).length)));const ne=H(T,k,o,t);if(typeof ne=="string")return ne;(0,b.$wh)(ne)&&(I||(I=[]),I.push(ne))}return I?(async()=>{for(const P of I){const Z=await P;if(typeof Z=="string")return Z}return null})():null},G=N.find(T=>!!T.allBasenames);G&&(W.allBasenames=G.allBasenames);const X=N.reduce((T,k)=>k.allPaths?T.concat(k.allPaths):T,[]);return X.length&&(W.allPaths=X),W}function se(E,j,N){if(j===!1)return A;const V=L(E,N);if(V===A)return A;if(typeof j=="boolean")return V;if(j){const W=j.when;if(typeof W=="string"){const G=(X,T,k,t)=>{if(!t||!V(X,T))return null;const o=W.replace("$(basename)",()=>k),I=t(o);return(0,b.$wh)(I)?I.then(P=>P?E:null):I?E:null};return G.requiresSiblings=!0,G}}return V}function oe(E,j){const N=E.filter(T=>!!T.basenames);if(N.length<2)return E;const V=N.reduce((T,k)=>{const t=k.basenames;return t?T.concat(t):T},[]);let W;if(j){W=[];for(let T=0,k=V.length;T<k;T++)W.push(j)}else W=N.reduce((T,k)=>{const t=k.patterns;return t?T.concat(t):T},[]);const G=function(T,k){if(typeof T!="string")return null;if(!k){let o;for(o=T.length;o>0;o--){const I=T.charCodeAt(o-1);if(I===U.CharCode.Slash||I===U.CharCode.Backslash)break}k=T.substr(o)}const t=V.indexOf(k);return t!==-1?W[t]:null};G.basenames=V,G.patterns=W,G.allBasenames=V;const X=E.filter(T=>!T.basenames);return X.push(G),X}function $(E,j){return(0,D.$yb)(E,j,(N,V)=>typeof N=="string"&&typeof V=="string"?N===V:typeof N!="string"&&typeof V!="string"?N.base===V.base&&N.pattern===V.pattern:!1)}}),define(ie[20],le([0,1,4,6,3]),function(ee,s,D,b,U){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.$mu=void 0,s.$ku=h,s.$lu=C,D=ue(D),b=ue(b),U=ue(U);let g;function O(){return g||(g=new TextDecoder("UTF-16LE")),g}let R;function x(){return R||(R=new TextDecoder("UTF-16BE")),R}let w;function h(){return w||(w=b.$G()?O():x()),w}function C(M,d,a){const c=new Uint16Array(M.buffer,d,a);return a>0&&(c[0]===65279||c[0]===65534)?u(M,d,a):O().decode(c)}function u(M,d,a){const c=[];let m=0;for(let n=0;n<a;n++){const i=U.$Ue(M,d);d+=2,c[m++]=String.fromCharCode(i)}return c.join("")}class F{constructor(d){this.a=d|0,this.b=new Uint16Array(this.a),this.c=null,this.d=0}reset(){this.c=null,this.d=0}build(){return this.c!==null?(this.f(),this.c.join("")):this.e()}e(){if(this.d===0)return"";const d=new Uint16Array(this.b.buffer,0,this.d);return h().decode(d)}f(){const d=this.e();this.d=0,this.c===null?this.c=[d]:this.c[this.c.length]=d}appendCharCode(d){const a=this.a-this.d;a<=1&&(a===0||D.$Of(d))&&this.f(),this.b[this.d++]=d}appendASCIICharCode(d){this.d===this.a&&this.f(),this.b[this.d++]=d}appendString(d){const a=d.length;if(this.d+a>=this.a){this.f(),this.c[this.c.length]=d;return}for(let c=0;c<a;c++)this.b[this.d++]=d.charCodeAt(c)}}s.$mu=F}),define(ie[21],le([0,1,3,20]),function(ee,s,D,b){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.$nu=void 0,s.$ou=O,D=ue(D);function U(x){return x.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class g{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(w,h,C,u){this.oldPosition=w,this.oldText=h,this.newPosition=C,this.newText=u}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${U(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${U(this.oldText)}")`:`(replace@${this.oldPosition} "${U(this.oldText)}" with "${U(this.newText)}")`}static a(w){return 4+2*w.length}static c(w,h,C){const u=h.length;D.$Xe(w,u,C),C+=4;for(let F=0;F<u;F++)D.$Ve(w,h.charCodeAt(F),C),C+=2;return C}static d(w,h){const C=D.$We(w,h);return h+=4,(0,b.$lu)(w,h,C)}writeSize(){return 8+g.a(this.oldText)+g.a(this.newText)}write(w,h){return D.$Xe(w,this.oldPosition,h),h+=4,D.$Xe(w,this.newPosition,h),h+=4,h=g.c(w,this.oldText,h),h=g.c(w,this.newText,h),h}static read(w,h,C){const u=D.$We(w,h);h+=4;const F=D.$We(w,h);h+=4;const M=g.d(w,h);h+=g.a(M);const d=g.d(w,h);return h+=g.a(d),C.push(new g(u,M,F,d)),h}}s.$nu=g;function O(x,w){return x===null||x.length===0?w:new R(x,w).compress()}class R{constructor(w,h){this.a=w,this.c=h,this.d=[],this.e=0,this.f=this.a.length,this.g=0,this.h=this.c.length,this.j=0}compress(){let w=0,h=0,C=this.n(w),u=this.l(h);for(;w<this.f||h<this.h;){if(C===null){this.k(u),u=this.l(++h);continue}if(u===null){this.m(C),C=this.n(++w);continue}if(u.oldEnd<=C.newPosition){this.k(u),u=this.l(++h);continue}if(C.newEnd<=u.oldPosition){this.m(C),C=this.n(++w);continue}if(u.oldPosition<C.newPosition){const[c,m]=R.r(u,C.newPosition-u.oldPosition);this.k(c),u=m;continue}if(C.newPosition<u.oldPosition){const[c,m]=R.q(C,u.oldPosition-C.newPosition);this.m(c),C=m;continue}let d,a;if(u.oldEnd===C.newEnd)d=C,a=u,C=this.n(++w),u=this.l(++h);else if(u.oldEnd<C.newEnd){const[c,m]=R.q(C,u.oldLength);d=c,a=u,C=m,u=this.l(++h)}else{const[c,m]=R.r(u,C.newLength);d=C,a=c,C=this.n(++w),u=m}this.d[this.e++]=new g(d.oldPosition,d.oldText,a.newPosition,a.newText),this.g+=d.newLength-d.oldLength,this.j+=a.newLength-a.oldLength}const F=R.s(this.d);return R.t(F)}k(w){this.d[this.e++]=R.o(this.g,w),this.j+=w.newLength-w.oldLength}l(w){return w<this.h?this.c[w]:null}m(w){this.d[this.e++]=R.p(this.j,w),this.g+=w.newLength-w.oldLength}n(w){return w<this.f?this.a[w]:null}static o(w,h){return new g(h.oldPosition-w,h.oldText,h.newPosition,h.newText)}static p(w,h){return new g(h.oldPosition,h.oldText,h.newPosition+w,h.newText)}static q(w,h){const C=w.newText.substr(0,h),u=w.newText.substr(h);return[new g(w.oldPosition,w.oldText,w.newPosition,C),new g(w.oldEnd,"",w.newPosition+h,u)]}static r(w,h){const C=w.oldText.substr(0,h),u=w.oldText.substr(h);return[new g(w.oldPosition,C,w.newPosition,w.newText),new g(w.oldPosition+h,u,w.newEnd,"")]}static s(w){if(w.length===0)return w;const h=[];let C=0,u=w[0];for(let F=1;F<w.length;F++){const M=w[F];u.oldEnd===M.oldPosition?u=new g(u.oldPosition,u.oldText+M.oldText,u.newPosition,u.newText+M.newText):(h[C++]=u,u=M)}return h[C++]=u,h}static t(w){if(w.length===0)return w;const h=[];let C=0;for(let u=0;u<w.length;u++){const F=w[u];F.oldText!==F.newText&&(h[C++]=F)}return h}}}),define(ie[22],le([0,1,37,4,9,5,8,14,21,13]),function(ee,s,D,b,U,g,O,R,x,w){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.$ID=void 0,b=ue(b);class h extends w.$Zc{constructor(u,F,M,d,a,c,m){super(),this.m=this.B(new D.$qe),this.onDidChangeContent=this.m.event,this.f=F,this.j=!c,this.g=d,this.h=a,this.c=new O.$HD(u,M,m)}equals(u){return!(u instanceof h)||this.f!==u.f||this.getEOL()!==u.getEOL()?!1:this.c.equal(u.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(u){return this.c.createSnapshot(u?this.f:"")}getOffsetAt(u,F){return this.c.getOffsetAt(u,F)}getPositionAt(u){return this.c.getPositionAt(u)}getRangeAt(u,F){const M=u+F,d=this.getPositionAt(u),a=this.getPositionAt(M);return new U.$Wt(d.lineNumber,d.column,a.lineNumber,a.column)}getValueInRange(u,F=g.EndOfLinePreference.TextDefined){if(u.isEmpty())return"";const M=this.n(F);return this.c.getValueInRange(u,M)}getValueLengthInRange(u,F=g.EndOfLinePreference.TextDefined){if(u.isEmpty())return 0;if(u.startLineNumber===u.endLineNumber)return u.endColumn-u.startColumn;const M=this.getOffsetAt(u.startLineNumber,u.startColumn),d=this.getOffsetAt(u.endLineNumber,u.endColumn);let a=0;const c=this.n(F),m=this.getEOL();if(c.length!==m.length){const n=c.length-m.length,i=u.endLineNumber-u.startLineNumber;a=n*i}return d-M+a}getCharacterCountInRange(u,F=g.EndOfLinePreference.TextDefined){if(this.j){let M=0;const d=u.startLineNumber,a=u.endLineNumber;for(let c=d;c<=a;c++){const m=this.getLineContent(c),n=c===d?u.startColumn-1:0,i=c===a?u.endColumn-1:m.length;for(let e=n;e<i;e++)b.$Of(m.charCodeAt(e))?(M=M+1,e=e+1):M=M+1}return M+=this.n(F).length*(a-d),M}return this.getValueLengthInRange(u,F)}getNearestChunk(u){return this.c.getNearestChunk(u)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(u){return this.c.getLineContent(u)}getLineCharCode(u,F){return this.c.getLineCharCode(u,F)}getCharCode(u){return this.c.getCharCode(u)}getLineLength(u){return this.c.getLineLength(u)}getLineMinColumn(u){return 1}getLineMaxColumn(u){return this.getLineLength(u)+1}getLineFirstNonWhitespaceColumn(u){const F=b.$zf(this.getLineContent(u));return F===-1?0:F+1}getLineLastNonWhitespaceColumn(u){const F=b.$Bf(this.getLineContent(u));return F===-1?0:F+2}n(u){switch(u){case g.EndOfLinePreference.LF:return`
`;case g.EndOfLinePreference.CRLF:return`\r
`;case g.EndOfLinePreference.TextDefined:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(u){this.c.setEOL(u)}applyEdits(u,F,M){let d=this.g,a=this.h,c=this.j,m=!0,n=[];for(let L=0;L<u.length;L++){const y=u[L];m&&y._isTracked&&(m=!1);const v=y.range;if(y.text){let z=!0;c||(z=!b.$Zf(y.text),c=z),!d&&z&&(d=b.$Yf(y.text)),!a&&z&&(a=b.$2f(y.text))}let q="",B=0,S=0,p=0;if(y.text){let z;[B,S,p,z]=(0,R.$Hu)(y.text);const Q=this.getEOL(),Y=Q===`\r
`?R.StringEOL.CRLF:R.StringEOL.LF;z===R.StringEOL.Unknown||z===Y?q=y.text:q=y.text.replace(/\r\n|\r|\n/g,Q)}n[L]={sortIndex:L,identifier:y.identifier||null,range:v,rangeOffset:this.getOffsetAt(v.startLineNumber,v.startColumn),rangeLength:this.getValueLengthInRange(v),text:q,eolCount:B,firstLineLength:S,lastLineLength:p,forceMoveMarkers:!!y.forceMoveMarkers,isAutoWhitespaceEdit:y.isAutoWhitespaceEdit||!1}}n.sort(h.u);let i=!1;for(let L=0,y=n.length-1;L<y;L++){const v=n[L].range.getEndPosition(),q=n[L+1].range.getStartPosition();if(q.isBeforeOrEqual(v)){if(q.isBefore(v))throw new Error("Overlapping ranges are not allowed!");i=!0}}m&&(n=this.s(n));const e=M||F?h._getInverseEditRanges(n):[],r=[];if(F)for(let L=0;L<n.length;L++){const y=n[L],v=e[L];if(y.isAutoWhitespaceEdit&&y.range.isEmpty())for(let q=v.startLineNumber;q<=v.endLineNumber;q++){let B="";q===v.startLineNumber&&(B=this.getLineContent(y.range.startLineNumber),b.$zf(B)!==-1)||r.push({lineNumber:q,oldContent:B})}}let l=null;if(M){let L=0;l=[];for(let y=0;y<n.length;y++){const v=n[y],q=e[y],B=this.getValueInRange(v.range),S=v.rangeOffset+L;L+=v.text.length-B.length,l[y]={sortIndex:v.sortIndex,identifier:v.identifier,range:q,text:B,textChange:new x.$nu(v.rangeOffset,B,S,v.text)}}i||l.sort((y,v)=>y.sortIndex-v.sortIndex)}this.g=d,this.h=a,this.j=c;const f=this.t(n);let A=null;if(F&&r.length>0){r.sort((L,y)=>y.lineNumber-L.lineNumber),A=[];for(let L=0,y=r.length;L<y;L++){const v=r[L].lineNumber;if(L>0&&r[L-1].lineNumber===v)continue;const q=r[L].oldContent,B=this.getLineContent(v);B.length===0||B===q||b.$zf(B)!==-1||A.push(v)}}return this.m.fire(),new g.$rw(l,f,A)}s(u){return u.length<1e3?u:[this._toSingleEditOperation(u)]}_toSingleEditOperation(u){let F=!1;const M=u[0].range,d=u[u.length-1].range,a=new U.$Wt(M.startLineNumber,M.startColumn,d.endLineNumber,d.endColumn);let c=M.startLineNumber,m=M.startColumn;const n=[];for(let f=0,A=u.length;f<A;f++){const L=u[f],y=L.range;F=F||L.forceMoveMarkers,n.push(this.getValueInRange(new U.$Wt(c,m,y.startLineNumber,y.startColumn))),L.text.length>0&&n.push(L.text),c=y.endLineNumber,m=y.endColumn}const i=n.join(""),[e,r,l]=(0,R.$Hu)(i);return{sortIndex:0,identifier:u[0].identifier,range:a,rangeOffset:this.getOffsetAt(a.startLineNumber,a.startColumn),rangeLength:this.getValueLengthInRange(a,g.EndOfLinePreference.TextDefined),text:i,eolCount:e,firstLineLength:r,lastLineLength:l,forceMoveMarkers:F,isAutoWhitespaceEdit:!1}}t(u){u.sort(h.w);const F=[];for(let M=0;M<u.length;M++){const d=u[M],a=d.range.startLineNumber,c=d.range.startColumn,m=d.range.endLineNumber,n=d.range.endColumn;if(a===m&&c===n&&d.text.length===0)continue;d.text?(this.c.delete(d.rangeOffset,d.rangeLength),this.c.insert(d.rangeOffset,d.text,!0)):this.c.delete(d.rangeOffset,d.rangeLength);const i=new U.$Wt(a,c,m,n);F.push({range:i,rangeLength:d.rangeLength,text:d.text,rangeOffset:d.rangeOffset,forceMoveMarkers:d.forceMoveMarkers})}return F}findMatchesLineByLine(u,F,M,d){return this.c.findMatchesLineByLine(u,F,M,d)}getPieceTree(){return this.c}static _getInverseEditRange(u,F){const M=u.startLineNumber,d=u.startColumn,[a,c,m]=(0,R.$Hu)(F);let n;if(F.length>0){const i=a+1;i===1?n=new U.$Wt(M,d,M,d+c):n=new U.$Wt(M,d,M+i-1,m+1)}else n=new U.$Wt(M,d,M,d);return n}static _getInverseEditRanges(u){const F=[];let M=0,d=0,a=null;for(let c=0,m=u.length;c<m;c++){const n=u[c];let i,e;a?a.range.endLineNumber===n.range.startLineNumber?(i=M,e=d+(n.range.startColumn-a.range.endColumn)):(i=M+(n.range.startLineNumber-a.range.endLineNumber),e=n.range.startColumn):(i=n.range.startLineNumber,e=n.range.startColumn);let r;if(n.text.length>0){const l=n.eolCount+1;l===1?r=new U.$Wt(i,e,i,e+n.firstLineLength):r=new U.$Wt(i,e,i+l-1,n.lastLineLength+1)}else r=new U.$Wt(i,e,i,e);M=r.endLineNumber,d=r.endColumn,F.push(r),a=n}return F}static u(u,F){const M=U.$Wt.compareRangesUsingEnds(u.range,F.range);return M===0?u.sortIndex-F.sortIndex:M}static w(u,F){const M=U.$Wt.compareRangesUsingEnds(u.range,F.range);return M===0?F.sortIndex-u.sortIndex:-M}}s.$ID=h}),define(ie[23],le([0,1,2,4,5,8,22]),function(ee,s,D,b,U,g,O){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.$JD=void 0,b=ue(b);class R{constructor(h,C,u,F,M,d,a,c,m){this.a=h,this.b=C,this.c=u,this.d=F,this.e=M,this.f=d,this.g=a,this.h=c,this.j=m}k(h){const C=this.c+this.d+this.e,u=this.c+this.e;return C===0?h===U.DefaultEndOfLine.LF?`
`:`\r
`:u>C/2?`\r
`:`
`}create(h){const C=this.k(h),u=this.a;if(this.j&&(C===`\r
`&&(this.c>0||this.d>0)||C===`
`&&(this.c>0||this.e>0)))for(let M=0,d=u.length;M<d;M++){const a=u[M].buffer.replace(/\r\n|\r|\n/g,C),c=(0,g.$DD)(a);u[M]=new g.$GD(a,c)}const F=new O.$ID(u,this.b,C,this.f,this.g,this.h,this.j);return{textBuffer:F,disposable:F}}getFirstLineText(h){return this.a[0].buffer.substr(0,h).split(/\r\n|\r|\n/)[0]}}class x{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(h){if(h.length===0)return;this.a.length===0&&b.$0f(h)&&(this.b=b.$9f,h=h.substr(1));const C=h.charCodeAt(h.length-1);C===D.CharCode.CarriageReturn||C>=55296&&C<=56319?(this.m(h.substr(0,h.length-1),!1),this.c=!0,this.d=C):(this.m(h,!1),this.c=!1,this.d=C)}m(h,C){!C&&h.length===0||(this.c?this.n(String.fromCharCode(this.d)+h):this.n(h))}n(h){const C=(0,g.$ED)(this.e,h);this.a.push(new g.$GD(h,C.lineStarts)),this.f+=C.cr,this.g+=C.lf,this.h+=C.crlf,C.isBasicASCII||(this.l=!1,this.j||(this.j=b.$Yf(h)),this.k||(this.k=b.$2f(h)))}finish(h=!0){return this.o(),new R(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,h)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const h=this.a[this.a.length-1];h.buffer+=String.fromCharCode(this.d);const C=(0,g.$DD)(h.buffer);h.lineStarts=C,this.d===D.CharCode.CarriageReturn&&this.f++}}}s.$JD=x}),define(ie[24],le([0,1,2,7,25]),function(ee,s,D,b,U){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.$Fj=s.TokenType=void 0;var g;(function(h){h[h.LParen=0]="LParen",h[h.RParen=1]="RParen",h[h.Neg=2]="Neg",h[h.Eq=3]="Eq",h[h.NotEq=4]="NotEq",h[h.Lt=5]="Lt",h[h.LtEq=6]="LtEq",h[h.Gt=7]="Gt",h[h.GtEq=8]="GtEq",h[h.RegexOp=9]="RegexOp",h[h.RegexStr=10]="RegexStr",h[h.True=11]="True",h[h.False=12]="False",h[h.In=13]="In",h[h.Not=14]="Not",h[h.And=15]="And",h[h.Or=16]="Or",h[h.Str=17]="Str",h[h.QuotedStr=18]="QuotedStr",h[h.Error=19]="Error",h[h.EOF=20]="EOF"})(g||(s.TokenType=g={}));function O(...h){switch(h.length){case 1:return(0,U.localize)(1693,null,h[0]);case 2:return(0,U.localize)(1694,null,h[0],h[1]);case 3:return(0,U.localize)(1695,null,h[0],h[1],h[2]);default:return}}const R=(0,U.localize)(1696,null),x=(0,U.localize)(1697,null);class w{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(C){switch(C.type){case g.LParen:return"(";case g.RParen:return")";case g.Neg:return"!";case g.Eq:return C.isTripleEq?"===":"==";case g.NotEq:return C.isTripleEq?"!==":"!=";case g.Lt:return"<";case g.LtEq:return"<=";case g.Gt:return">=";case g.GtEq:return">=";case g.RegexOp:return"=~";case g.RegexStr:return C.lexeme;case g.True:return"true";case g.False:return"false";case g.In:return"in";case g.Not:return"not";case g.And:return"&&";case g.Or:return"||";case g.Str:return C.lexeme;case g.QuotedStr:return C.lexeme;case g.Error:return C.lexeme;case g.EOF:return"EOF";default:throw(0,b.$_)(`unhandled token type: ${JSON.stringify(C)}; have you forgotten to add a case?`)}}static{this.a=new Set(["i","g","s","m","y","u"].map(C=>C.charCodeAt(0)))}static{this.b=new Map([["not",g.Not],["in",g.In],["false",g.False],["true",g.True]])}get errors(){return this.g}reset(C){return this.c=C,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case D.CharCode.OpenParen:this.k(g.LParen);break;case D.CharCode.CloseParen:this.k(g.RParen);break;case D.CharCode.ExclamationMark:if(this.h(D.CharCode.Equals)){const u=this.h(D.CharCode.Equals);this.f.push({type:g.NotEq,offset:this.d,isTripleEq:u})}else this.k(g.Neg);break;case D.CharCode.SingleQuote:this.o();break;case D.CharCode.Slash:this.q();break;case D.CharCode.Equals:if(this.h(D.CharCode.Equals)){const u=this.h(D.CharCode.Equals);this.f.push({type:g.Eq,offset:this.d,isTripleEq:u})}else this.h(D.CharCode.Tilde)?this.k(g.RegexOp):this.l(O("==","=~"));break;case D.CharCode.LessThan:this.k(this.h(D.CharCode.Equals)?g.LtEq:g.Lt);break;case D.CharCode.GreaterThan:this.k(this.h(D.CharCode.Equals)?g.GtEq:g.Gt);break;case D.CharCode.Ampersand:this.h(D.CharCode.Ampersand)?this.k(g.And):this.l(O("&&"));break;case D.CharCode.Pipe:this.h(D.CharCode.Pipe)?this.k(g.Or):this.l(O("||"));break;case D.CharCode.Space:case D.CharCode.CarriageReturn:case D.CharCode.Tab:case D.CharCode.LineFeed:case D.CharCode.NoBreakSpace:break;default:this.n()}return this.d=this.e,this.k(g.EOF),Array.from(this.f)}h(C){return this.r()||this.c.charCodeAt(this.e)!==C?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?D.CharCode.Null:this.c.charCodeAt(this.e)}k(C){this.f.push({type:C,offset:this.d})}l(C){const u=this.d,F=this.c.substring(this.d,this.e),M={type:g.Error,offset:this.d,lexeme:F};this.g.push({offset:u,lexeme:F,additionalInfo:C}),this.f.push(M)}n(){this.m.lastIndex=this.d;const C=this.m.exec(this.c);if(C){this.e=this.d+C[0].length;const u=this.c.substring(this.d,this.e),F=w.b.get(u);F?this.k(F):this.f.push({type:g.Str,lexeme:u,offset:this.d})}}o(){for(;this.j()!==D.CharCode.SingleQuote&&!this.r();)this.i();if(this.r()){this.l(R);return}this.i(),this.f.push({type:g.QuotedStr,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let C=this.e,u=!1,F=!1;for(;;){if(C>=this.c.length){this.e=C,this.l(x);return}const d=this.c.charCodeAt(C);if(u)u=!1;else if(d===D.CharCode.Slash&&!F){C++;break}else d===D.CharCode.OpenSquareBracket?F=!0:d===D.CharCode.Backslash?u=!0:d===D.CharCode.CloseSquareBracket&&(F=!1);C++}for(;C<this.c.length&&w.a.has(this.c.charCodeAt(C));)C++;this.e=C;const M=this.c.substring(this.d,this.e);this.f.push({type:g.RegexStr,lexeme:M,offset:this.d})}r(){return this.e>=this.c.length}}s.$Fj=w}),define(ie[26],le([0,1]),function(ee,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.$Hi=void 0;class D{constructor(U,g=[],O=!1){this.ctor=U,this.staticArguments=g,this.supportsDelayedInstantiation=O}}s.$Hi=D}),define(ie[27],le([0,1,26]),function(ee,s,D){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationType=void 0,s.$Zs=g,s.$1s=O;const b=[];var U;(function(R){R[R.Eager=0]="Eager",R[R.Delayed=1]="Delayed"})(U||(s.InstantiationType=U={}));function g(R,x,w){x instanceof D.$Hi||(x=new D.$Hi(x,[],!!w)),b.push([R,x])}function O(){return b}}),define(ie[11],le([0,1]),function(ee,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.$Ji=s._util=void 0,s.$Ki=U,s.$Li=g;var D;(function(O){O.serviceIds=new Map,O.DI_TARGET="$di$target",O.DI_DEPENDENCIES="$di$dependencies";function R(x){return x[O.DI_DEPENDENCIES]||[]}O.getServiceDependencies=R})(D||(s._util=D={})),s.$Ji=U("instantiationService");function b(O,R,x){R[D.DI_TARGET]===R?R[D.DI_DEPENDENCIES].push({id:O,index:x}):(R[D.DI_DEPENDENCIES]=[{id:O,index:x}],R[D.DI_TARGET]=R)}function U(O){if(D.serviceIds.has(O))return D.serviceIds.get(O);const R=function(x,w,h){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");b(R,x,h)};return R.toString=()=>O,D.serviceIds.set(O,R),R}function g(O){return O}}),define(ie[28],le([0,1,2,6,4,24,11,25,7]),function(ee,s,D,b,U,g,O,R,x){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.$3j=s.$2j=s.$1j=s.$Zj=s.$Yj=s.$Xj=s.$Wj=s.$Vj=s.$Uj=s.$Tj=s.$Sj=s.$Rj=s.$Qj=s.$Pj=s.$Oj=s.$Nj=s.$Mj=s.$Lj=s.$Ij=s.$Hj=s.ContextKeyExprType=void 0,s.$Gj=h,s.$Jj=f,s.$Kj=A,s.$4j=G;const w=new Map;w.set("false",!1),w.set("true",!0),w.set("isMac",b.$m),w.set("isLinux",b.$n),w.set("isWindows",b.$l),w.set("isWeb",b.$r),w.set("isMacNative",b.$m&&!b.$r),w.set("isEdge",b.$K),w.set("isFirefox",b.$I),w.set("isChrome",b.$H),w.set("isSafari",b.$J);function h(k,t){if(w.get(k)!==void 0)throw(0,x.$$)("contextkey.setConstant(k, v) invoked with already set constant `k`");w.set(k,t)}const C=Object.prototype.hasOwnProperty;var u;(function(k){k[k.False=0]="False",k[k.True=1]="True",k[k.Defined=2]="Defined",k[k.Not=3]="Not",k[k.Equals=4]="Equals",k[k.NotEquals=5]="NotEquals",k[k.And=6]="And",k[k.Regex=7]="Regex",k[k.NotRegex=8]="NotRegex",k[k.Or=9]="Or",k[k.In=10]="In",k[k.NotIn=11]="NotIn",k[k.Greater=12]="Greater",k[k.GreaterEquals=13]="GreaterEquals",k[k.Smaller=14]="Smaller",k[k.SmallerEquals=15]="SmallerEquals"})(u||(s.ContextKeyExprType=u={}));const F={regexParsingWithErrorRecovery:!0},M=(0,R.localize)(1673,null),d=(0,R.localize)(1674,null),a=(0,R.localize)(1675,null),c=(0,R.localize)(1676,null),m=(0,R.localize)(1677,null),n=(0,R.localize)(1678,null),i=(0,R.localize)(1679,null),e=(0,R.localize)(1680,null);class r{static{this.c=new Error}get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(t=F){this.k=t,this.d=new g.$Fj,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(t){if(t===""){this.h.push({message:M,offset:0,lexeme:"",additionalInfo:d});return}this.f=this.d.reset(t).scan(),this.g=0,this.h=[];try{const o=this.l();if(!this.E()){const I=this.D(),P=I.type===g.TokenType.Str?n:void 0;throw this.h.push({message:m,offset:I.offset,lexeme:g.$Fj.getLexeme(I),additionalInfo:P}),r.c}return o}catch(o){if(o!==r.c)throw o;return}}l(){return this.m()}m(){const t=[this.o()];for(;this.y(g.TokenType.Or);){const o=this.o();t.push(o)}return t.length===1?t[0]:l.or(...t)}o(){const t=[this.s()];for(;this.y(g.TokenType.And);){const o=this.s();t.push(o)}return t.length===1?t[0]:l.and(...t)}s(){if(this.y(g.TokenType.Neg)){const t=this.D();switch(t.type){case g.TokenType.True:return this.z(),y.INSTANCE;case g.TokenType.False:return this.z(),v.INSTANCE;case g.TokenType.LParen:{this.z();const o=this.l();return this.A(g.TokenType.RParen,c),o?.negate()}case g.TokenType.Str:return this.z(),Q.create(t.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",t)}}return this.t()}t(){const t=this.D();switch(t.type){case g.TokenType.True:return this.z(),l.true();case g.TokenType.False:return this.z(),l.false();case g.TokenType.LParen:{this.z();const o=this.l();return this.A(g.TokenType.RParen,c),o}case g.TokenType.Str:{const o=t.lexeme;if(this.z(),this.y(g.TokenType.RegexOp)){const P=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),P.type!==g.TokenType.RegexStr)throw this.B("REGEX",P);const Z=P.lexeme,H=Z.lastIndexOf("/"),ne=H===Z.length-1?void 0:this.w(Z.substring(H+1));let re;try{re=new RegExp(Z.substring(1,H),ne)}catch{throw this.B("REGEX",P)}return se.create(o,re)}switch(P.type){case g.TokenType.RegexStr:case g.TokenType.Error:{const Z=[P.lexeme];this.z();let H=this.D(),ne=0;for(let ae=0;ae<P.lexeme.length;ae++)P.lexeme.charCodeAt(ae)===D.CharCode.OpenParen?ne++:P.lexeme.charCodeAt(ae)===D.CharCode.CloseParen&&ne--;for(;!this.E()&&H.type!==g.TokenType.And&&H.type!==g.TokenType.Or;){switch(H.type){case g.TokenType.LParen:ne++;break;case g.TokenType.RParen:ne--;break;case g.TokenType.RegexStr:case g.TokenType.QuotedStr:for(let ae=0;ae<H.lexeme.length;ae++)H.lexeme.charCodeAt(ae)===D.CharCode.OpenParen?ne++:P.lexeme.charCodeAt(ae)===D.CharCode.CloseParen&&ne--}if(ne<0)break;Z.push(g.$Fj.getLexeme(H)),this.z(),H=this.D()}const re=Z.join(""),ce=re.lastIndexOf("/"),he=ce===re.length-1?void 0:this.w(re.substring(ce+1));let fe;try{fe=new RegExp(re.substring(1,ce),he)}catch{throw this.B("REGEX",P)}return l.regex(o,fe)}case g.TokenType.QuotedStr:{const Z=P.lexeme;this.z();let H=null;if(!(0,U.$hf)(Z)){const ne=Z.indexOf("/"),re=Z.lastIndexOf("/");if(ne!==re&&ne>=0){const ce=Z.slice(ne+1,re),he=Z[re+1]==="i"?"i":"";try{H=new RegExp(ce,he)}catch{throw this.B("REGEX",P)}}}if(H===null)throw this.B("REGEX",P);return se.create(o,H)}default:throw this.B("REGEX",this.D())}}if(this.y(g.TokenType.Not)){this.A(g.TokenType.In,a);const P=this.u();return l.notIn(o,P)}switch(this.D().type){case g.TokenType.Eq:{this.z();const P=this.u();if(this.x().type===g.TokenType.QuotedStr)return l.equals(o,P);switch(P){case"true":return l.has(o);case"false":return l.not(o);default:return l.equals(o,P)}}case g.TokenType.NotEq:{this.z();const P=this.u();if(this.x().type===g.TokenType.QuotedStr)return l.notEquals(o,P);switch(P){case"true":return l.not(o);case"false":return l.has(o);default:return l.notEquals(o,P)}}case g.TokenType.Lt:return this.z(),J.create(o,this.u());case g.TokenType.LtEq:return this.z(),te.create(o,this.u());case g.TokenType.Gt:return this.z(),_.create(o,this.u());case g.TokenType.GtEq:return this.z(),K.create(o,this.u());case g.TokenType.In:return this.z(),l.in(o,this.u());default:return l.has(o)}}case g.TokenType.EOF:throw this.h.push({message:i,offset:t.offset,lexeme:"",additionalInfo:e}),r.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const t=this.D();switch(t.type){case g.TokenType.Str:case g.TokenType.QuotedStr:return this.z(),t.lexeme;case g.TokenType.True:return this.z(),"true";case g.TokenType.False:return this.z(),"false";case g.TokenType.In:return this.z(),"in";default:return""}}w(t){return t.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(t){return this.C(t)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(t,o){if(this.C(t))return this.z();throw this.B(o,this.D())}B(t,o,I){const P=(0,R.localize)(1681,null,t,g.$Fj.getLexeme(o)),Z=o.offset,H=g.$Fj.getLexeme(o);return this.h.push({message:P,offset:Z,lexeme:H,additionalInfo:I}),r.c}C(t){return this.D().type===t}D(){return this.f[this.g]}E(){return this.D().type===g.TokenType.EOF}}s.$Hj=r;class l{static false(){return y.INSTANCE}static true(){return v.INSTANCE}static has(t){return q.create(t)}static equals(t,o){return B.create(t,o)}static notEquals(t,o){return z.create(t,o)}static regex(t,o){return se.create(t,o)}static in(t,o){return S.create(t,o)}static notIn(t,o){return p.create(t,o)}static not(t){return Q.create(t)}static and(...t){return E.create(t,null,!0)}static or(...t){return j.create(t,null,!0)}static greater(t,o){return _.create(t,o)}static greaterEquals(t,o){return K.create(t,o)}static smaller(t,o){return J.create(t,o)}static smallerEquals(t,o){return te.create(t,o)}static{this.c=new r({regexParsingWithErrorRecovery:!1})}static deserialize(t){return t==null?void 0:this.c.parse(t)}}s.$Ij=l;function f(k){const t=new r({regexParsingWithErrorRecovery:!1});return k.map(o=>(t.parse(o),t.lexingErrors.length>0?t.lexingErrors.map(I=>({errorMessage:I.additionalInfo?(0,R.localize)(1682,null,I.additionalInfo):(0,R.localize)(1683,null),offset:I.offset,length:I.lexeme.length})):t.parsingErrors.length>0?t.parsingErrors.map(I=>({errorMessage:I.additionalInfo?`${I.message}. ${I.additionalInfo}`:I.message,offset:I.offset,length:I.lexeme.length})):[]))}function A(k,t){const o=k?k.substituteConstants():void 0,I=t?t.substituteConstants():void 0;return!o&&!I?!0:!o||!I?!1:o.equals(I)}function L(k,t){return k.cmp(t)}class y{static{this.INSTANCE=new y}constructor(){this.type=u.False}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!1}serialize(){return"false"}keys(){return[]}map(t){return this}negate(){return v.INSTANCE}}s.$Lj=y;class v{static{this.INSTANCE=new v}constructor(){this.type=u.True}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!0}serialize(){return"true"}keys(){return[]}map(t){return this}negate(){return y.INSTANCE}}s.$Mj=v;class q{static create(t,o=null){const I=w.get(t);return typeof I=="boolean"?I?v.INSTANCE:y.INSTANCE:new q(t,o)}constructor(t,o){this.key=t,this.c=o,this.type=u.Defined}cmp(t){return t.type!==this.type?this.type-t.type:V(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}substituteConstants(){const t=w.get(this.key);return typeof t=="boolean"?t?v.INSTANCE:y.INSTANCE:this}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(t){return t.mapDefined(this.key)}negate(){return this.c||(this.c=Q.create(this.key,this)),this.c}}s.$Nj=q;class B{static create(t,o,I=null){if(typeof o=="boolean")return o?q.create(t,I):Q.create(t,I);const P=w.get(t);return typeof P=="boolean"?o===(P?"true":"false")?v.INSTANCE:y.INSTANCE:new B(t,o,I)}constructor(t,o,I){this.c=t,this.d=o,this.f=I,this.type=u.Equals}cmp(t){return t.type!==this.type?this.type-t.type:W(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=w.get(this.c);if(typeof t=="boolean"){const o=t?"true":"false";return this.d===o?v.INSTANCE:y.INSTANCE}return this}evaluate(t){return t.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(t){return t.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=z.create(this.c,this.d,this)),this.f}}s.$Oj=B;class S{static create(t,o){return new S(t,o)}constructor(t,o){this.d=t,this.f=o,this.type=u.In,this.c=null}cmp(t){return t.type!==this.type?this.type-t.type:W(this.d,this.f,t.d,t.f)}equals(t){return t.type===this.type?this.d===t.d&&this.f===t.f:!1}substituteConstants(){return this}evaluate(t){const o=t.getValue(this.f),I=t.getValue(this.d);return Array.isArray(o)?o.includes(I):typeof I=="string"&&typeof o=="object"&&o!==null?C.call(o,I):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(t){return t.mapIn(this.d,this.f)}negate(){return this.c||(this.c=p.create(this.d,this.f)),this.c}}s.$Pj=S;class p{static create(t,o){return new p(t,o)}constructor(t,o){this.d=t,this.f=o,this.type=u.NotIn,this.c=S.create(t,o)}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(t){return t.mapNotIn(this.d,this.f)}negate(){return this.c}}s.$Qj=p;class z{static create(t,o,I=null){if(typeof o=="boolean")return o?Q.create(t,I):q.create(t,I);const P=w.get(t);return typeof P=="boolean"?o===(P?"true":"false")?y.INSTANCE:v.INSTANCE:new z(t,o,I)}constructor(t,o,I){this.c=t,this.d=o,this.f=I,this.type=u.NotEquals}cmp(t){return t.type!==this.type?this.type-t.type:W(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=w.get(this.c);if(typeof t=="boolean"){const o=t?"true":"false";return this.d===o?y.INSTANCE:v.INSTANCE}return this}evaluate(t){return t.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(t){return t.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=B.create(this.c,this.d,this)),this.f}}s.$Rj=z;class Q{static create(t,o=null){const I=w.get(t);return typeof I=="boolean"?I?y.INSTANCE:v.INSTANCE:new Q(t,o)}constructor(t,o){this.c=t,this.d=o,this.type=u.Not}cmp(t){return t.type!==this.type?this.type-t.type:V(this.c,t.c)}equals(t){return t.type===this.type?this.c===t.c:!1}substituteConstants(){const t=w.get(this.c);return typeof t=="boolean"?t?y.INSTANCE:v.INSTANCE:this}evaluate(t){return!t.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(t){return t.mapNot(this.c)}negate(){return this.d||(this.d=q.create(this.c,this)),this.d}}s.$Sj=Q;function Y(k,t){if(typeof k=="string"){const o=parseFloat(k);isNaN(o)||(k=o)}return typeof k=="string"||typeof k=="number"?t(k):y.INSTANCE}class _{static create(t,o,I=null){return Y(o,P=>new _(t,P,I))}constructor(t,o,I){this.c=t,this.d=o,this.f=I,this.type=u.Greater}cmp(t){return t.type!==this.type?this.type-t.type:W(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=te.create(this.c,this.d,this)),this.f}}s.$Tj=_;class K{static create(t,o,I=null){return Y(o,P=>new K(t,P,I))}constructor(t,o,I){this.c=t,this.d=o,this.f=I,this.type=u.GreaterEquals}cmp(t){return t.type!==this.type?this.type-t.type:W(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=J.create(this.c,this.d,this)),this.f}}s.$Uj=K;class J{static create(t,o,I=null){return Y(o,P=>new J(t,P,I))}constructor(t,o,I){this.c=t,this.d=o,this.f=I,this.type=u.Smaller}cmp(t){return t.type!==this.type?this.type-t.type:W(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=K.create(this.c,this.d,this)),this.f}}s.$Vj=J;class te{static create(t,o,I=null){return Y(o,P=>new te(t,P,I))}constructor(t,o,I){this.c=t,this.d=o,this.f=I,this.type=u.SmallerEquals}cmp(t){return t.type!==this.type?this.type-t.type:W(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=_.create(this.c,this.d,this)),this.f}}s.$Wj=te;class se{static create(t,o){return new se(t,o)}constructor(t,o){this.d=t,this.f=o,this.type=u.Regex,this.c=null}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.d<t.d)return-1;if(this.d>t.d)return 1;const o=this.f?this.f.source:"",I=t.f?t.f.source:"";return o<I?-1:o>I?1:0}equals(t){if(t.type===this.type){const o=this.f?this.f.source:"",I=t.f?t.f.source:"";return this.d===t.d&&o===I}return!1}substituteConstants(){return this}evaluate(t){const o=t.getValue(this.d);return this.f?this.f.test(o):!1}serialize(){const t=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${t}`}keys(){return[this.d]}map(t){return t.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=oe.create(this)),this.c}}s.$Xj=se;class oe{static create(t){return new oe(t)}constructor(t){this.c=t,this.type=u.NotRegex}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(t){return new oe(this.c.map(t))}negate(){return this.c}}s.$Yj=oe;function $(k){let t=null;for(let o=0,I=k.length;o<I;o++){const P=k[o].substituteConstants();if(k[o]!==P&&t===null){t=[];for(let Z=0;Z<o;Z++)t[Z]=k[Z]}t!==null&&(t[o]=P)}return t===null?k:t}class E{static create(t,o,I){return E.d(t,o,I)}constructor(t,o){this.expr=t,this.c=o,this.type=u.And}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let o=0,I=this.expr.length;o<I;o++){const P=L(this.expr[o],t.expr[o]);if(P!==0)return P}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let o=0,I=this.expr.length;o<I;o++)if(!this.expr[o].equals(t.expr[o]))return!1;return!0}return!1}substituteConstants(){const t=$(this.expr);return t===this.expr?this:E.create(t,this.c,!1)}evaluate(t){for(let o=0,I=this.expr.length;o<I;o++)if(!this.expr[o].evaluate(t))return!1;return!0}static d(t,o,I){const P=[];let Z=!1;for(const H of t)if(H){if(H.type===u.True){Z=!0;continue}if(H.type===u.False)return y.INSTANCE;if(H.type===u.And){P.push(...H.expr);continue}P.push(H)}if(P.length===0&&Z)return v.INSTANCE;if(P.length!==0){if(P.length===1)return P[0];P.sort(L);for(let H=1;H<P.length;H++)P[H-1].equals(P[H])&&(P.splice(H,1),H--);if(P.length===1)return P[0];for(;P.length>1;){const H=P[P.length-1];if(H.type!==u.Or)break;P.pop();const ne=P.pop(),re=P.length===0,ce=j.create(H.expr.map(he=>E.create([he,ne],null,I)),null,re);ce&&(P.push(ce),P.sort(L))}if(P.length===1)return P[0];if(I){for(let H=0;H<P.length;H++)for(let ne=H+1;ne<P.length;ne++)if(P[H].negate().equals(P[ne]))return y.INSTANCE;if(P.length===1)return P[0]}return new E(P,o)}}serialize(){return this.expr.map(t=>t.serialize()).join(" && ")}keys(){const t=[];for(const o of this.expr)t.push(...o.keys());return t}map(t){return new E(this.expr.map(o=>o.map(t)),null)}negate(){if(!this.c){const t=[];for(const o of this.expr)t.push(o.negate());this.c=j.create(t,this,!0)}return this.c}}s.$Zj=E;class j{static create(t,o,I){return j.d(t,o,I)}constructor(t,o){this.expr=t,this.c=o,this.type=u.Or}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let o=0,I=this.expr.length;o<I;o++){const P=L(this.expr[o],t.expr[o]);if(P!==0)return P}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let o=0,I=this.expr.length;o<I;o++)if(!this.expr[o].equals(t.expr[o]))return!1;return!0}return!1}substituteConstants(){const t=$(this.expr);return t===this.expr?this:j.create(t,this.c,!1)}evaluate(t){for(let o=0,I=this.expr.length;o<I;o++)if(this.expr[o].evaluate(t))return!0;return!1}static d(t,o,I){let P=[],Z=!1;if(t){for(let H=0,ne=t.length;H<ne;H++){const re=t[H];if(re){if(re.type===u.False){Z=!0;continue}if(re.type===u.True)return v.INSTANCE;if(re.type===u.Or){P=P.concat(re.expr);continue}P.push(re)}}if(P.length===0&&Z)return y.INSTANCE;P.sort(L)}if(P.length!==0){if(P.length===1)return P[0];for(let H=1;H<P.length;H++)P[H-1].equals(P[H])&&(P.splice(H,1),H--);if(P.length===1)return P[0];if(I){for(let H=0;H<P.length;H++)for(let ne=H+1;ne<P.length;ne++)if(P[H].negate().equals(P[ne]))return v.INSTANCE;if(P.length===1)return P[0]}return new j(P,o)}}serialize(){return this.expr.map(t=>t.serialize()).join(" || ")}keys(){const t=[];for(const o of this.expr)t.push(...o.keys());return t}map(t){return new j(this.expr.map(o=>o.map(t)),null)}negate(){if(!this.c){const t=[];for(const o of this.expr)t.push(o.negate());for(;t.length>1;){const o=t.shift(),I=t.shift(),P=[];for(const Z of T(o))for(const H of T(I))P.push(E.create([Z,H],null,!1));t.unshift(j.create(P,null,!1))}this.c=j.create(t,this,!0)}return this.c}}s.$1j=j;class N extends q{static{this.d=[]}static all(){return N.d.values()}constructor(t,o,I){super(t,null),this.f=o,typeof I=="object"?N.d.push({...I,key:t}):I!==!0&&N.d.push({key:t,description:I,type:o!=null?typeof o:void 0})}bindTo(t){return t.createKey(this.key,this.f)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return B.create(this.key,t)}notEqualsTo(t){return z.create(this.key,t)}}s.$2j=N,s.$3j=(0,O.$Ki)("contextKeyService");function V(k,t){return k<t?-1:k>t?1:0}function W(k,t,o,I){return k<o?-1:k>o?1:t<I?-1:t>I?1:0}function G(k,t){if(k.type===u.False||t.type===u.True)return!0;if(k.type===u.Or)return t.type===u.Or?X(k.expr,t.expr):!1;if(t.type===u.Or){for(const o of t.expr)if(G(k,o))return!0;return!1}if(k.type===u.And){if(t.type===u.And)return X(t.expr,k.expr);for(const o of k.expr)if(G(o,t))return!0;return!1}return k.equals(t)}function X(k,t){let o=0,I=0;for(;o<k.length&&I<t.length;){const P=k[o].cmp(t[I]);if(P<0)return!1;P===0&&o++,I++}return o===k.length}function T(k){return k.type===u.Or?k.expr:[k]}}),define(ie[29],le([0,1,3,19,30,27,11]),function(ee,s,D,b,U,g,O){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.$TL=s.$OL=void 0,s.$PL=h,s.$QL=C,s.$RL=u,s.$SL=F,s.$OL=(0,O.$Ki)("notebookDocumentService");const R=["W","X","Y","Z","a","b","c","d","e","f"],x=new RegExp(`^[${R.join("")}]+`),w=7;function h(d){if(d.scheme!==U.Schemas.vscodeNotebookCell)return;const a=d.fragment.indexOf("s");if(a<0)return;const c=parseInt(d.fragment.substring(0,a).replace(x,""),w),m=(0,D.$_e)(d.fragment.substring(a+1)).toString();if(!isNaN(c))return{handle:c,notebook:d.with({scheme:m,fragment:null})}}function C(d,a){const c=a.toString(w),n=`${c.length<R.length?R[c.length-1]:"z"}${c}s${(0,D.$af)(D.$Se.fromString(d.scheme),!0,!0)}`;return d.with({scheme:U.Schemas.vscodeNotebookCell,fragment:n})}function u(d){if(d.scheme!==U.Schemas.vscodeNotebookMetadata)return;const a=(0,D.$_e)(d.fragment).toString();return d.with({scheme:a,fragment:null})}function F(d){const a=`${(0,D.$af)(D.$Se.fromString(d.scheme),!0,!0)}`;return d.with({scheme:U.Schemas.vscodeNotebookMetadata,fragment:a})}class M{constructor(){this.a=new b.$Fc}getNotebook(a){if(a.scheme===U.Schemas.vscodeNotebookCell){const c=h(a);if(c){const m=this.a.get(c.notebook);if(m)return m}}return this.a.get(a)}addNotebookDocument(a){this.a.set(a.uri,a)}removeNotebookDocument(a){this.a.delete(a.uri)}}s.$TL=M,(0,g.$Zs)(s.$OL,M,g.InstantiationType.Delayed)}),define(ie[31],le([0,1,3,18,38,17,30,10,6,28,29]),function(ee,s,D,b,U,g,O,R,x,w,h){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.$cM=s.$_L=s.CellStatusbarAlignment=s.$$L=s.NotebookFindScopeType=s.NotebookEditorPriority=s.$8L=s.$7L=s.$5L=s.CellUri=s.NotebookUri=s.CellEditType=s.SelectionStateType=s.NotebookCellsChangeType=s.RendererMessagingSpec=s.NotebookRendererMatch=s.NotebookExecutionState=s.NotebookCellExecutionState=s.NotebookRunState=s.$4L=s.$3L=s.$2L=s.$1L=s.CellKind=s.$ZL=s.$YL=s.$XL=s.$WL=s.$VL=s.$UL=void 0,s.$6L=f,s.$9L=y,s.$0L=v,s.$aM=S,s.$bM=z,b=ue(b),s.$UL="workbench.editor.notebook",s.$VL="workbench.editor.notebookTextDiffEditor",s.$WL="workbench.editor.notebookMultiTextDiffEditor",s.$XL="workbench.editor.interactive",s.$YL="workbench.editor.repl",s.$ZL="replNotebook.input.execute";var C;(function($){$[$.Markup=1]="Markup",$[$.Code=2]="Code"})(C||(s.CellKind=C={})),s.$1L=["application/json","application/javascript","text/html","image/svg+xml",g.$gt.latex,g.$gt.markdown,"image/png","image/jpeg",g.$gt.text],s.$2L=[g.$gt.latex,g.$gt.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",g.$gt.text],s.$3L=new Map([["ms-toolsai.jupyter",new Set(["jupyter-notebook","interactive"])],["ms-toolsai.jupyter-renderers",new Set(["jupyter-notebook","interactive"])]]),s.$4L="_notAvailable";var u;(function($){$[$.Running=1]="Running",$[$.Idle=2]="Idle"})(u||(s.NotebookRunState=u={}));var F;(function($){$[$.Unconfirmed=1]="Unconfirmed",$[$.Pending=2]="Pending",$[$.Executing=3]="Executing"})(F||(s.NotebookCellExecutionState=F={}));var M;(function($){$[$.Unconfirmed=1]="Unconfirmed",$[$.Pending=2]="Pending",$[$.Executing=3]="Executing"})(M||(s.NotebookExecutionState=M={}));var d;(function($){$[$.WithHardKernelDependency=0]="WithHardKernelDependency",$[$.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",$[$.Pure=2]="Pure",$[$.Never=3]="Never"})(d||(s.NotebookRendererMatch=d={}));var a;(function($){$.Always="always",$.Never="never",$.Optional="optional"})(a||(s.RendererMessagingSpec=a={}));var c;(function($){$[$.ModelChange=1]="ModelChange",$[$.Move=2]="Move",$[$.ChangeCellLanguage=5]="ChangeCellLanguage",$[$.Initialize=6]="Initialize",$[$.ChangeCellMetadata=7]="ChangeCellMetadata",$[$.Output=8]="Output",$[$.OutputItem=9]="OutputItem",$[$.ChangeCellContent=10]="ChangeCellContent",$[$.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",$[$.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",$[$.ChangeCellMime=13]="ChangeCellMime",$[$.Unknown=100]="Unknown"})(c||(s.NotebookCellsChangeType=c={}));var m;(function($){$[$.Handle=0]="Handle",$[$.Index=1]="Index"})(m||(s.SelectionStateType=m={}));var n;(function($){$[$.Replace=1]="Replace",$[$.Output=2]="Output",$[$.Metadata=3]="Metadata",$[$.CellLanguage=4]="CellLanguage",$[$.DocumentMetadata=5]="DocumentMetadata",$[$.Move=6]="Move",$[$.OutputItems=7]="OutputItems",$[$.PartialMetadata=8]="PartialMetadata",$[$.PartialInternalMetadata=9]="PartialInternalMetadata"})(n||(s.CellEditType=n={}));var i;(function($){$.scheme=O.Schemas.vscodeNotebookMetadata;function E(N){return(0,h.$SL)(N)}$.generate=E;function j(N){return(0,h.$RL)(N)}$.parse=j})(i||(s.NotebookUri=i={}));var e;(function($){$.scheme=O.Schemas.vscodeNotebookCell;function E(X,T){return(0,h.$QL)(X,T)}$.generate=E;function j(X){return(0,h.$PL)(X)}$.parse=j;function N(X,T){return X.with({scheme:O.Schemas.vscodeNotebookCellOutput,fragment:`op${T??""},${X.scheme!==O.Schemas.file?X.scheme:""}`})}$.generateCellOutputUri=N;function V(X){if(X.scheme!==O.Schemas.vscodeNotebookCellOutput)return;const T=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(X.fragment);if(!T)return;const k=T[1]&&T[1]!==""?T[1]:void 0,t=T[2];return{outputId:k,notebook:X.with({scheme:t||O.Schemas.file,fragment:null})}}$.parseCellOutputUri=V;function W(X,T,k){return $.generate(X,T).with({scheme:k})}$.generateCellPropertyUri=W;function G(X,T){if(X.scheme===T)return $.parse(X.with({scheme:$.scheme}))}$.parseCellPropertyUri=G})(e||(s.CellUri=e={}));const r=$=>x.$l?$.replace(/\//g,"\\"):$;class l{constructor(E=[],j=s.$1L){this.e=j,this.d=[...new Set(E)].map(N=>({pattern:N,matches:b.$Fk(r(N))}))}sort(E){const j=new Map(U.Iterable.map(E,V=>[V,r(V)]));let N=[];for(const{matches:V}of this.d)for(const[W,G]of j)if(V(G)){N.push(W),j.delete(W);break}return j.size&&(N=N.concat([...j.keys()].sort((V,W)=>this.e.indexOf(V)-this.e.indexOf(W)))),N}prioritize(E,j){const N=this.f(E);if(N===-1){this.d.unshift({pattern:E,matches:b.$Fk(r(E))});return}const V=new Set(j.map(G=>this.f(G,N)));V.delete(-1);const W=Array.from(V).sort();this.d.splice(N+1,0,...W.map(G=>this.d[G]));for(let G=W.length-1;G>=0;G--)this.d.splice(W[G],1)}toArray(){return this.d.map(E=>E.pattern)}f(E,j=this.d.length){const N=r(E);for(let V=0;V<j;V++)if(this.d[V].matches(N))return V;return-1}}s.$5L=l;function f($,E,j,N=(V,W)=>V===W){const V=[];function W(T,k,t){if(k===0&&t.length===0)return;const o=V[V.length-1];o&&o.start+o.deleteCount===T?(o.deleteCount+=k,o.toInsert.push(...t)):V.push({start:T,deleteCount:k,toInsert:t})}let G=0,X=0;for(;;){if(G===$.length){W(G,0,E.slice(X));break}if(X===E.length){W(G,$.length-G,[]);break}const T=$[G],k=E[X];if(N(T,k)){G+=1,X+=1;continue}j(k)?(W(G,1,[]),G+=1):(W(G,0,[k]),X+=1)}return V}s.$7L=new w.$2j("notebookEditorCursorAtBoundary","none"),s.$8L=new w.$2j("notebookEditorCursorAtLineBoundary","none");var A;(function($){$.default="default",$.option="option"})(A||(s.NotebookEditorPriority=A={}));var L;(function($){$.Cells="cells",$.Text="text",$.None="none"})(L||(s.NotebookFindScopeType=L={}));function y($){const E=$;return!!((typeof E.include=="string"||b.$Gk(E.include))&&(typeof E.exclude=="string"||b.$Gk(E.exclude)))}function v($,E,j){if(Array.isArray($.viewType)&&$.viewType.indexOf(E)>=0||$.viewType===E)return!0;if($.filenamePattern){const N=y($.filenamePattern)?$.filenamePattern.include:$.filenamePattern,V=y($.filenamePattern)?$.filenamePattern.exclude:void 0;if(b.$Ek(N,(0,R.$sc)(j.fsPath).toLowerCase()))return!(V&&b.$Ek(V,(0,R.$sc)(j.fsPath).toLowerCase()))}return!1}s.$$L={displayOrder:"notebook.displayOrder",cellToolbarLocation:"notebook.cellToolbarLocation",cellToolbarVisibility:"notebook.cellToolbarVisibility",showCellStatusBar:"notebook.showCellStatusBar",textDiffEditorPreview:"notebook.diff.enablePreview",diffOverviewRuler:"notebook.diff.overviewRuler",experimentalInsertToolbarAlignment:"notebook.experimental.insertToolbarAlignment",compactView:"notebook.compactView",focusIndicator:"notebook.cellFocusIndicator",insertToolbarLocation:"notebook.insertToolbarLocation",globalToolbar:"notebook.globalToolbar",stickyScrollEnabled:"notebook.stickyScroll.enabled",stickyScrollMode:"notebook.stickyScroll.mode",undoRedoPerCell:"notebook.undoRedoPerCell",consolidatedOutputButton:"notebook.consolidatedOutputButton",showFoldingControls:"notebook.showFoldingControls",dragAndDropEnabled:"notebook.dragAndDropEnabled",cellEditorOptionsCustomizations:"notebook.editorOptionsCustomizations",consolidatedRunButton:"notebook.consolidatedRunButton",openGettingStarted:"notebook.experimental.openGettingStarted",globalToolbarShowLabel:"notebook.globalToolbarShowLabel",markupFontSize:"notebook.markup.fontSize",markdownLineHeight:"notebook.markdown.lineHeight",interactiveWindowCollapseCodeCells:"interactiveWindow.collapseCellInputCode",outputScrollingDeprecated:"notebook.experimental.outputScrolling",outputScrolling:"notebook.output.scrolling",textOutputLineLimit:"notebook.output.textLineLimit",LinkifyOutputFilePaths:"notebook.output.linkifyFilePaths",minimalErrorRendering:"notebook.output.minimalErrorRendering",formatOnSave:"notebook.formatOnSave.enabled",insertFinalNewline:"notebook.insertFinalNewline",defaultFormatter:"notebook.defaultFormatter",formatOnCellExecution:"notebook.formatOnCellExecution",codeActionsOnSave:"notebook.codeActionsOnSave",outputWordWrap:"notebook.output.wordWrap",outputLineHeightDeprecated:"notebook.outputLineHeight",outputLineHeight:"notebook.output.lineHeight",outputFontSizeDeprecated:"notebook.outputFontSize",outputFontSize:"notebook.output.fontSize",outputFontFamilyDeprecated:"notebook.outputFontFamily",outputFontFamily:"notebook.output.fontFamily",findFilters:"notebook.find.filters",logging:"notebook.logging",confirmDeleteRunningCell:"notebook.confirmDeleteRunningCell",remoteSaving:"notebook.experimental.remoteSave",gotoSymbolsAllSymbols:"notebook.gotoSymbols.showAllSymbols",outlineShowMarkdownHeadersOnly:"notebook.outline.showMarkdownHeadersOnly",outlineShowCodeCells:"notebook.outline.showCodeCells",outlineShowCodeCellSymbols:"notebook.outline.showCodeCellSymbols",breadcrumbsShowCodeCells:"notebook.breadcrumbs.showCodeCells",scrollToRevealCell:"notebook.scrolling.revealNextCellOnExecute",cellChat:"notebook.experimental.cellChat",cellGenerate:"notebook.experimental.generate",notebookVariablesView:"notebook.experimental.variablesView",InteractiveWindowPromptToSave:"interactiveWindow.promptToSaveOnClose",cellFailureDiagnostics:"notebook.cellFailureDiagnostics",outputBackupSizeLimit:"notebook.backup.sizeLimit"};var q;(function($){$[$.Left=1]="Left",$[$.Right=2]="Right"})(q||(s.CellStatusbarAlignment=q={}));class B{static{this.d="notebook/"}static create(E){return`${B.d}${E}`}static parse(E){if(E.startsWith(B.d))return E.substring(B.d.length)}}s.$_L=B;function S($){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes($)}const p=new TextDecoder;function z($){const E=[];let j=!1;for(const G of $)(E.length===0||j)&&(E.push(G),j=!0);let N=_(E);const V=D.$Se.concat(E.map(G=>D.$Se.wrap(G))),W=oe(V);return N=N||W.byteLength!==V.byteLength,{data:W,didCompression:N}}s.$cM="\x1B[A";const Q=s.$cM.split("").map($=>$.charCodeAt(0)),Y=10;function _($){let E=!1;return $.forEach((j,N)=>{if(N===0||j.length<s.$cM.length)return;const V=$[N-1],W=j.subarray(0,s.$cM.length);if(W[0]===Q[0]&&W[1]===Q[1]&&W[2]===Q[2]){const G=V.lastIndexOf(Y);if(G===-1)return;E=!0,$[N-1]=V.subarray(0,G),$[N]=j.subarray(s.$cM.length)}}),E}function K($){let E=$;do $=E,E=$.replace(/[^\n]\x08/gm,"");while(E.length<$.length);return $}function J($){for($=$.replace(/\r+\n/gm,`
`);$.search(/\r[^$]/g)>-1;){const E=$.match(/^(.*)\r+/m)[1];let j=$.match(/\r+(.*)$/m)[1];j=j+E.slice(j.length,E.length),$=$.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,j)}return $}const te=8,se=13;function oe($){return!$.buffer.includes(te)&&!$.buffer.includes(se)?$:D.$Se.fromString(J(K(p.decode($.buffer))))}}),define(ie[39],le([0,1,40,41,42,5,23,31,9,16]),function(ee,s,D,b,U,g,O,R,x,w){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NotebookEditorSimpleWorker=void 0,s.create=d,g=ue(g);function h(a){let c=(0,b.$Aj)(104579,0);for(let m=0;m<a.buffer.length;m++)c=(0,b.$zj)(a.buffer[m],c);return c}class C{get textBuffer(){if(this.a)return this.a;const c=new O.$JD;c.acceptChunk(Array.isArray(this.d)?this.d.join(`
`):this.d);const m=c.finish(!0);return this.a=m.create(g.DefaultEndOfLine.LF).textBuffer,this.a}primaryKey(){return this.b===void 0&&(this.b=(0,b.$yj)(this.getValue())),this.b}constructor(c,m,n,i,e,r,l){this.handle=c,this.d=m,this.language=n,this.cellKind=i,this.outputs=e,this.metadata=r,this.internalMetadata=l,this.b=null,this.c=null}getFullModelRange(){const c=this.textBuffer.getLineCount();return new x.$Wt(1,1,c,this.textBuffer.getLineLength(c)+1)}getValue(){const c=this.getFullModelRange();return this.textBuffer.getValueInRange(c,g.EndOfLinePreference.LF)}getComparisonValue(){return this.b!==null?this.b:(this.c=(0,b.$yj)([(0,b.$yj)(this.language),(0,b.$yj)(this.getValue()),this.metadata,this.internalMetadata,this.outputs.map(c=>({outputs:c.outputs.map(m=>({mime:m.mime,data:h(m.data)})),metadata:c.metadata}))]),this.c)}getHashValue(){return this.c!==null?this.c:(this.c=(0,b.$yj)([(0,b.$yj)(this.getValue()),this.language,this.metadata,this.internalMetadata]),this.c)}}class u{constructor(c,m,n){this.uri=c,this.cells=m,this.metadata=n}acceptModelChanged(c){c.rawEvents.forEach(m=>{if(m.kind===R.NotebookCellsChangeType.ModelChange)this._spliceNotebookCells(m.changes);else if(m.kind===R.NotebookCellsChangeType.Move){const n=this.cells.splice(m.index,1);this.cells.splice(m.newIdx,0,...n)}else if(m.kind===R.NotebookCellsChangeType.Output){const n=this.cells[m.index];n.outputs=m.outputs}else if(m.kind===R.NotebookCellsChangeType.ChangeCellLanguage){this.a(m.index);const n=this.cells[m.index];n.language=m.language}else if(m.kind===R.NotebookCellsChangeType.ChangeCellMetadata){this.a(m.index);const n=this.cells[m.index];n.metadata=m.metadata}else if(m.kind===R.NotebookCellsChangeType.ChangeCellInternalMetadata){this.a(m.index);const n=this.cells[m.index];n.internalMetadata=m.internalMetadata}})}a(c){if(c<0||c>=this.cells.length)throw new Error(`Illegal index ${c}. Cells length: ${this.cells.length}`)}_spliceNotebookCells(c){c.reverse().forEach(m=>{const i=m[2].map(e=>new C(e.handle,e.source,e.language,e.cellKind,e.outputs,e.metadata));this.cells.splice(m[0],m[1],...i)})}}class F{constructor(c){this.textModel=c}getElements(){const c=new Int32Array(this.textModel.cells.length);for(let m=0;m<this.textModel.cells.length;m++)c[m]=this.textModel.cells[m].getComparisonValue();return c}getCellHash(c){const m=Array.isArray(c.source)?c.source.join(`
`):c.source;return(0,b.$yj)([(0,b.$yj)(m),c.metadata])}}class M{constructor(){this.a=Object.create(null)}dispose(){}$acceptNewModel(c,m){this.a[c]=new u(U.URI.parse(c),m.cells.map(n=>new C(n.handle,n.source,n.language,n.cellKind,n.outputs,n.metadata)),m.metadata)}$acceptModelChanged(c,m){this.a[c]?.acceptModelChanged(m)}$acceptRemovedModel(c){this.a[c]&&delete this.a[c]}$computeDiff(c,m){const n=this.b(c),i=this.b(m);return{cellsDiff:new D.$3t(new F(n),new F(i)).ComputeDiff(!1)}}$canPromptRecommendation(c){const n=this.b(c).cells;for(let i=0;i<n.length;i++){const e=n[i];if(e.cellKind===R.CellKind.Markup||e.language!=="python")continue;const r=e.textBuffer.getLineCount(),l=Math.min(r,20),f=new x.$Wt(1,1,l,e.textBuffer.getLineLength(l)+1),L=new w.$xD("import\\s*pandas|from\\s*pandas",!0,!1,null).parseSearchRequest();if(!L)continue;if(e.textBuffer.findMatchesLineByLine(f,L,!0,1).length>0)return!0}return!1}b(c){return this.a[c]}}s.NotebookEditorSimpleWorker=M;function d(a){return new M}})}).call(this);

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/38c31bc77e0dd6ae88a4e9cc93428cc27a56ba40/core/vs/workbench/contrib/notebook/common/services/notebookSimpleWorker.js.map
